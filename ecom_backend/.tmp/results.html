<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:83,&quot;tests&quot;:178,&quot;passes&quot;:178,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-04-06T18:01:45.285Z&quot;,&quot;end&quot;:&quot;2025-04-06T18:01:46.312Z&quot;,&quot;duration&quot;:1027,&quot;testsRegistered&quot;:178,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;48989f9a-f65b-4acd-84c8-747e83442acc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;295cc562-9abd-4510-9946-3e9ba43f0083&quot;,&quot;title&quot;:&quot;AdminController Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;AdminController Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests \&quot;after each\&quot; hook in \&quot;AdminController Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8ced2c0-175b-4414-be2c-a28d5f4c9fef&quot;,&quot;parentUUID&quot;:&quot;295cc562-9abd-4510-9946-3e9ba43f0083&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;title&quot;:&quot;GET /admin/data&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 when the table query parameter is missing&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests GET /admin/data should return 400 when the table query parameter is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/admin/data\&quot;);\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;Invalid table name\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b22d294-41f6-4108-a03f-841f54161443&quot;,&quot;parentUUID&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 when the table query parameter is invalid&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests GET /admin/data should return 400 when the table query parameter is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/admin/data?table=NonExistingTable\&quot;);\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;Invalid table name\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56cde80c-07ea-4cce-9365-c0c9b44e32f2&quot;,&quot;parentUUID&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return admin data correctly when table parameter is \&quot;Admin\&quot;&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests GET /admin/data should return admin data correctly when table parameter is \&quot;Admin\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeRows = [{ user_id: 1, username: \&quot;admin\&quot; }];\nstub(db, \&quot;query\&quot;).resolves([fakeRows]);\nconst res = await request(app).get(\&quot;/admin/data?table=Admin\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(fakeRows);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b5aac1b-e287-4058-abfa-7d472b54fca1&quot;,&quot;parentUUID&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return non-admin table data when a valid table parameter is provided&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests GET /admin/data should return non-admin table data when a valid table parameter is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeRows = [{ course_id: 101, course_name: \&quot;Course 101\&quot; }];\nstub(db, \&quot;query\&quot;).resolves([fakeRows]);\nconst res = await request(app).get(\&quot;/admin/data?table=Courses\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(fakeRows);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02e9771f-4e15-41a6-ac50-7cc3f9ea15ef&quot;,&quot;parentUUID&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if db.query throws an error&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests GET /admin/data should return 500 if db.query throws an error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(db, \&quot;query\&quot;).rejects(new Error(\&quot;Database error\&quot;));\nconst res = await request(app).get(\&quot;/admin/data?table=Courses\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Internal server error\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3b82d1b-fae4-4290-9f48-ec2db25f48d2&quot;,&quot;parentUUID&quot;:&quot;859078ab-3dfe-406d-8217-5911885d289a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b22d294-41f6-4108-a03f-841f54161443&quot;,&quot;56cde80c-07ea-4cce-9365-c0c9b44e32f2&quot;,&quot;6b5aac1b-e287-4058-abfa-7d472b54fca1&quot;,&quot;02e9771f-4e15-41a6-ac50-7cc3f9ea15ef&quot;,&quot;d3b82d1b-fae4-4290-9f48-ec2db25f48d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:67,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;39557a3c-8921-4198-aa26-30a2e03f206d&quot;,&quot;title&quot;:&quot;PUT /admin/data&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\AdminController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 when the table query parameter is missing&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests PUT /admin/data should return 400 when the table query parameter is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).put(\&quot;/admin/data\&quot;).send({ data: [] });\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;Invalid table name\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;904d7331-f7d7-402b-8c4b-45aff7d427be&quot;,&quot;parentUUID&quot;:&quot;39557a3c-8921-4198-aa26-30a2e03f206d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 when data is missing or not an array&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests PUT /admin/data should return 400 when data is missing or not an array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .put(\&quot;/admin/data?table=Courses\&quot;)\n  .send({ data: \&quot;notAnArray\&quot; });\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({\n  error: \&quot;Invalid data format, expected an array\&quot;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f993e1-53c2-4525-9f6d-7fce840e2831&quot;,&quot;parentUUID&quot;:&quot;39557a3c-8921-4198-aa26-30a2e03f206d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should process update requests correctly&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests PUT /admin/data should process update requests correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updateData = [\n  {\n    course_id: 101,\n    module_name: \&quot;Updated Course Name\&quot;,\n    created_at: \&quot;2023-04-01T12:00:00Z\&quot;\n  }\n];\nconst dbQueryStub = stub(db, \&quot;query\&quot;);\ndbQueryStub.onCall(0).resolves();\nconst fakeUpdatedRow = [{ course_id: 101, module_name: \&quot;Updated Course Name\&quot;, created_at: \&quot;2023-04-01 12:00:00\&quot; }];\ndbQueryStub.onCall(1).resolves([fakeUpdatedRow]);\nconst res = await request(app)\n  .put(\&quot;/admin/data?table=Courses\&quot;)\n  .send({ data: updateData });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Data updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b664d9e9-a0dc-43b0-afc1-c4f14e835bb7&quot;,&quot;parentUUID&quot;:&quot;39557a3c-8921-4198-aa26-30a2e03f206d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if db.query throws an error during update&quot;,&quot;fullTitle&quot;:&quot;AdminController Blackbox Tests PUT /admin/data should return 500 if db.query throws an error during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(db, \&quot;query\&quot;).rejects(new Error(\&quot;Database error\&quot;));\nconst res = await request(app)\n  .put(\&quot;/admin/data?table=Courses\&quot;)\n  .send({ data: [{ course_id: 101, module_name: \&quot;Name\&quot; }] });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Internal server error\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b7b14ec-9a5d-4ab3-840b-2dc081f486e9&quot;,&quot;parentUUID&quot;:&quot;39557a3c-8921-4198-aa26-30a2e03f206d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;904d7331-f7d7-402b-8c4b-45aff7d427be&quot;,&quot;64f993e1-53c2-4525-9f6d-7fce840e2831&quot;,&quot;b664d9e9-a0dc-43b0-afc1-c4f14e835bb7&quot;,&quot;3b7b14ec-9a5d-4ab3-840b-2dc081f486e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2873a6a0-c59d-46c7-8fce-3f3954105cd2&quot;,&quot;title&quot;:&quot;Certificate Controller Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CertificateController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CertificateController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Certificate Controller Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Blackbox Tests \&quot;after each\&quot; hook in \&quot;Certificate Controller Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1f123a7-4240-404f-8a73-f0d86f78594d&quot;,&quot;parentUUID&quot;:&quot;2873a6a0-c59d-46c7-8fce-3f3954105cd2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if any required certificate data is missing&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Blackbox Tests should return 400 if any required certificate data is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .post(\&quot;/certificate/email\&quot;)\n  .send({ email: \&quot;user@example.com\&quot;, username: \&quot;User\&quot; });\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;Missing required certificate data\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de57f0f0-4a37-48d7-a8e4-36333b307dfc&quot;,&quot;parentUUID&quot;:&quot;2873a6a0-c59d-46c7-8fce-3f3954105cd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should email certificate successfully&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Blackbox Tests should email certificate successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyPdfBuffer = Buffer.from(\&quot;dummy pdf\&quot;);\nconst dummyEmailResponse = { status: \&quot;sent\&quot; };\nstub(CertificateService, \&quot;generateCertificatePdf\&quot;).resolves(dummyPdfBuffer);\nstub(GmailService, \&quot;sendCertificateEmail\&quot;).resolves(dummyEmailResponse);\nconst certificatePayload = {\n  email: \&quot;user@example.com\&quot;,\n  username: \&quot;User\&quot;,\n  course: \&quot;Course 101\&quot;,\n  date: \&quot;2025-04-01\&quot;\n};\nconst res = await request(app)\n  .post(\&quot;/certificate/email\&quot;)\n  .send(certificatePayload);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Certificate emailed successfully\&quot;,\n  emailResponse: dummyEmailResponse\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b77731d3-96f2-4e4f-9ac9-dd1e131e3edc&quot;,&quot;parentUUID&quot;:&quot;2873a6a0-c59d-46c7-8fce-3f3954105cd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if an error occurs during certificate emailing&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Blackbox Tests should return 500 if an error occurs during certificate emailing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CertificateService, \&quot;generateCertificatePdf\&quot;).rejects(new Error(\&quot;PDF error\&quot;));\nconst certificatePayload = {\n  email: \&quot;user@example.com\&quot;,\n  username: \&quot;User\&quot;,\n  course: \&quot;Course 101\&quot;,\n  date: \&quot;2025-04-01\&quot;\n};\nconst res = await request(app)\n  .post(\&quot;/certificate/email\&quot;)\n  .send(certificatePayload);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Failed to email certificate\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aff7493a-8ba8-4a92-8763-dc4b97b309bb&quot;,&quot;parentUUID&quot;:&quot;2873a6a0-c59d-46c7-8fce-3f3954105cd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de57f0f0-4a37-48d7-a8e4-36333b307dfc&quot;,&quot;b77731d3-96f2-4e4f-9ac9-dd1e131e3edc&quot;,&quot;aff7493a-8ba8-4a92-8763-dc4b97b309bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4847f077-b6b9-46f9-afd6-1db81ae3ba24&quot;,&quot;title&quot;:&quot;Feedback Controller Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Feedback Controller Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests \&quot;after each\&quot; hook in \&quot;Feedback Controller Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ff2e870-3e4b-40c9-8520-7313dd98b4f5&quot;,&quot;parentUUID&quot;:&quot;4847f077-b6b9-46f9-afd6-1db81ae3ba24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;780adba9-03e2-4a10-ba97-a5a744e53ff7&quot;,&quot;title&quot;:&quot;GET /contactusfeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all feedback&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests GET /contactusfeedback should return all feedback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyFeedback = [{ id: 1, comment: \&quot;Great service!\&quot; }];\nstub(FeedbackModel, \&quot;getAll\&quot;).resolves(dummyFeedback);\nconst res = await request(app).get(\&quot;/contactusfeedback\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyFeedback);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfec77bc-ed1a-40a9-a308-2811b54965d7&quot;,&quot;parentUUID&quot;:&quot;780adba9-03e2-4a10-ba97-a5a744e53ff7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if an error occurs&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests GET /contactusfeedback should return 500 if an error occurs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/contactusfeedback\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8e5230c-9170-4825-a7f6-ba10c6d2af8e&quot;,&quot;parentUUID&quot;:&quot;780adba9-03e2-4a10-ba97-a5a744e53ff7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfec77bc-ed1a-40a9-a308-2811b54965d7&quot;,&quot;f8e5230c-9170-4825-a7f6-ba10c6d2af8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb56015e-689a-4da3-acf6-9f47e828dc40&quot;,&quot;title&quot;:&quot;GET /contactusfeedback/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return feedback by id&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests GET /contactusfeedback/:id should return feedback by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyFeedback = { id: 1, comment: \&quot;Excellent!\&quot; };\nstub(FeedbackModel, \&quot;getById\&quot;).resolves(dummyFeedback);\nconst res = await request(app).get(\&quot;/contactusfeedback/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyFeedback);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed311efd-17f7-4ff4-80b3-33711167f6fa&quot;,&quot;parentUUID&quot;:&quot;cb56015e-689a-4da3-acf6-9f47e828dc40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if feedback is not found&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests GET /contactusfeedback/:id should return 404 if feedback is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;getById\&quot;).resolves(null);\nconst res = await request(app).get(\&quot;/contactusfeedback/999\&quot;);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Feedback not found\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da653fa3-bd17-4866-8513-76cfcff7cb23&quot;,&quot;parentUUID&quot;:&quot;cb56015e-689a-4da3-acf6-9f47e828dc40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests GET /contactusfeedback/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/contactusfeedback/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4fe8b77-4209-44ff-adab-6f984b358093&quot;,&quot;parentUUID&quot;:&quot;cb56015e-689a-4da3-acf6-9f47e828dc40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed311efd-17f7-4ff4-80b3-33711167f6fa&quot;,&quot;da653fa3-bd17-4866-8513-76cfcff7cb23&quot;,&quot;c4fe8b77-4209-44ff-adab-6f984b358093&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a0d5bfb1-3e94-4d49-9cc0-8848db53408e&quot;,&quot;title&quot;:&quot;POST /contactusfeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create feedback successfully&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests POST /contactusfeedback should create feedback successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;create\&quot;).resolves(123);\nconst feedbackData = { comment: \&quot;Loved it!\&quot; };\nconst res = await request(app)\n  .post(\&quot;/contactusfeedback\&quot;)\n  .send(feedbackData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Feedback submitted successfully\&quot;,\n  feedbackId: 123,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8540c93-b5b6-4631-b3fd-3b1a264142e3&quot;,&quot;parentUUID&quot;:&quot;a0d5bfb1-3e94-4d49-9cc0-8848db53408e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests POST /contactusfeedback should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst feedbackData = { comment: \&quot;Loved it!\&quot; };\nconst res = await request(app)\n  .post(\&quot;/contactusfeedback\&quot;)\n  .send(feedbackData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c33e107d-8d67-44b9-bfcf-7a47aaec745a&quot;,&quot;parentUUID&quot;:&quot;a0d5bfb1-3e94-4d49-9cc0-8848db53408e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8540c93-b5b6-4631-b3fd-3b1a264142e3&quot;,&quot;c33e107d-8d67-44b9-bfcf-7a47aaec745a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;266c7ba0-3e32-4ebd-819c-86d2a479d583&quot;,&quot;title&quot;:&quot;PUT /contactusfeedback/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update feedback successfully&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests PUT /contactusfeedback/:id should update feedback successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;update\&quot;).resolves();\nconst updateData = { comment: \&quot;Updated comment\&quot; };\nconst res = await request(app)\n  .put(\&quot;/contactusfeedback/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Feedback updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;feefc68e-48c5-4386-994b-6ef92120c47b&quot;,&quot;parentUUID&quot;:&quot;266c7ba0-3e32-4ebd-819c-86d2a479d583&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests PUT /contactusfeedback/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { comment: \&quot;Updated comment\&quot; };\nconst res = await request(app)\n  .put(\&quot;/contactusfeedback/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22e5dab1-d315-493d-b825-583c02a51443&quot;,&quot;parentUUID&quot;:&quot;266c7ba0-3e32-4ebd-819c-86d2a479d583&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;feefc68e-48c5-4386-994b-6ef92120c47b&quot;,&quot;22e5dab1-d315-493d-b825-583c02a51443&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6bb305be-3bed-44ab-9d65-6393c9feb85a&quot;,&quot;title&quot;:&quot;DELETE /contactusfeedback/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\ContactFeedbackController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete feedback successfully&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests DELETE /contactusfeedback/:id should delete feedback successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;delete\&quot;).resolves();\nconst res = await request(app).delete(\&quot;/contactusfeedback/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Feedback deleted successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c1fafaf-bfc2-4b26-9082-ec5a1b9b14c0&quot;,&quot;parentUUID&quot;:&quot;6bb305be-3bed-44ab-9d65-6393c9feb85a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Blackbox Tests DELETE /contactusfeedback/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).delete(\&quot;/contactusfeedback/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbf22490-63ff-470e-8acc-1bcde3098fb2&quot;,&quot;parentUUID&quot;:&quot;6bb305be-3bed-44ab-9d65-6393c9feb85a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c1fafaf-bfc2-4b26-9082-ec5a1b9b14c0&quot;,&quot;cbf22490-63ff-470e-8acc-1bcde3098fb2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a5dabd0-12f3-413e-8a82-ea56579a7c4d&quot;,&quot;title&quot;:&quot;Course Controller Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Course Controller Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests \&quot;after each\&quot; hook in \&quot;Course Controller Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8d1d1ce-2486-476f-87b9-96e97c7fb9bc&quot;,&quot;parentUUID&quot;:&quot;9a5dabd0-12f3-413e-8a82-ea56579a7c4d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c2280730-69a1-463b-b796-db38d0c3748a&quot;,&quot;title&quot;:&quot;GET /getAllCourses&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return courses filtered by keyword&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /getAllCourses should return courses filtered by keyword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourses = [{ course_id: 1, creator_id: 10, title: \&quot;Test Course\&quot; }];\nstub(CourseModel, \&quot;getAll\&quot;).resolves(dummyCourses);\nconst res = await request(app).get(\&quot;/getAllCourses?keyword=Test\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ data: dummyCourses });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c84ecd17-2f63-4f1f-b7d4-90e5d9c54097&quot;,&quot;parentUUID&quot;:&quot;c2280730-69a1-463b-b796-db38d0c3748a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /getAllCourses should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/getAllCourses\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b132f49-a2d7-4445-85b0-6f49744f0046&quot;,&quot;parentUUID&quot;:&quot;c2280730-69a1-463b-b796-db38d0c3748a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c84ecd17-2f63-4f1f-b7d4-90e5d9c54097&quot;,&quot;3b132f49-a2d7-4445-85b0-6f49744f0046&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;20e07722-0828-4664-89c2-1ed80da6aa04&quot;,&quot;title&quot;:&quot;GET /getCourse/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return course data if found&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /getCourse/:id should return course data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourse = { course_id: 1, title: \&quot;Test Course\&quot; };\nstub(CourseModel, \&quot;getById\&quot;).resolves(dummyCourse);\nconst res = await request(app).get(\&quot;/getCourse/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ courseData: dummyCourse });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af0d9497-d0a2-4eb3-8c67-779320bf2d08&quot;,&quot;parentUUID&quot;:&quot;20e07722-0828-4664-89c2-1ed80da6aa04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if course not found&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /getCourse/:id should return 404 if course not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getById\&quot;).resolves(null);\nconst res = await request(app).get(\&quot;/getCourse/999\&quot;);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Course not found\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;002ebe2b-1c0c-42a1-85af-2b0db1fcc364&quot;,&quot;parentUUID&quot;:&quot;20e07722-0828-4664-89c2-1ed80da6aa04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /getCourse/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/getCourse/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6db8878e-f81f-41ba-be86-e32e05496145&quot;,&quot;parentUUID&quot;:&quot;20e07722-0828-4664-89c2-1ed80da6aa04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af0d9497-d0a2-4eb3-8c67-779320bf2d08&quot;,&quot;002ebe2b-1c0c-42a1-85af-2b0db1fcc364&quot;,&quot;6db8878e-f81f-41ba-be86-e32e05496145&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d19007d9-d5d1-4c3e-b933-f7d6e4c43241&quot;,&quot;title&quot;:&quot;POST /createCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a course successfully&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests POST /createCourse should create a course successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;create\&quot;).resolves({ course_id: 101, creator_id: 10 });\nconst courseData = { title: \&quot;New Course\&quot;, description: \&quot;Course description\&quot; };\nconst res = await request(app)\n  .post(\&quot;/createCourse\&quot;)\n  .send(courseData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Course created successfully\&quot;,\n  data: { courseId: 101 }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;467415c2-1a1b-4fea-b321-ccbd2fc2a893&quot;,&quot;parentUUID&quot;:&quot;d19007d9-d5d1-4c3e-b933-f7d6e4c43241&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests POST /createCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst courseData = { title: \&quot;New Course\&quot; };\nconst res = await request(app)\n  .post(\&quot;/createCourse\&quot;)\n  .send(courseData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46bfebf5-c0d9-416e-bf1f-090996f02d33&quot;,&quot;parentUUID&quot;:&quot;d19007d9-d5d1-4c3e-b933-f7d6e4c43241&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;467415c2-1a1b-4fea-b321-ccbd2fc2a893&quot;,&quot;46bfebf5-c0d9-416e-bf1f-090996f02d33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4ad7480f-b465-4c72-8483-2b560accf571&quot;,&quot;title&quot;:&quot;PUT /updateCourse/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a course successfully&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests PUT /updateCourse/:id should update a course successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;update\&quot;).resolves();\nconst updateData = { title: \&quot;Updated Course Title\&quot; };\nconst res = await request(app)\n  .put(\&quot;/updateCourse/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Course updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ed334bb-eaa4-45ed-bfb9-f3bce480379f&quot;,&quot;parentUUID&quot;:&quot;4ad7480f-b465-4c72-8483-2b560accf571&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests PUT /updateCourse/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { title: \&quot;Updated Course Title\&quot; };\nconst res = await request(app)\n  .put(\&quot;/updateCourse/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;060804a4-ed4c-447e-917d-cb9b3c22869e&quot;,&quot;parentUUID&quot;:&quot;4ad7480f-b465-4c72-8483-2b560accf571&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ed334bb-eaa4-45ed-bfb9-f3bce480379f&quot;,&quot;060804a4-ed4c-447e-917d-cb9b3c22869e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4a552bf-c4fb-4c79-94c2-cc1008e31cfb&quot;,&quot;title&quot;:&quot;DELETE /deleteCourse/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests DELETE /deleteCourse/:id should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(\&quot;/deleteCourse/1\&quot;);\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;creator_id is required\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;483f8526-501a-416d-961e-3e851bfd9cd5&quot;,&quot;parentUUID&quot;:&quot;e4a552bf-c4fb-4c79-94c2-cc1008e31cfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a course successfully&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests DELETE /deleteCourse/:id should delete a course successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;delete\&quot;).resolves(true);\nconst res = await request(app)\n  .delete(\&quot;/deleteCourse/1\&quot;)\n  .query({ creator_id: 10 });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Course deleted successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4fcd644-8f9d-4dee-8600-75cfcf01ccf4&quot;,&quot;parentUUID&quot;:&quot;e4a552bf-c4fb-4c79-94c2-cc1008e31cfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if course not found or not authorized&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests DELETE /deleteCourse/:id should return 404 if course not found or not authorized&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;delete\&quot;).resolves(false);\nconst res = await request(app)\n  .delete(\&quot;/deleteCourse/1\&quot;)\n  .query({ creator_id: 10 });\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({\n  error: \&quot;Course not found or you are not authorized to delete it\&quot;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0d9f7fb-4fcf-4877-a4f6-4c6c353ad0c5&quot;,&quot;parentUUID&quot;:&quot;e4a552bf-c4fb-4c79-94c2-cc1008e31cfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests DELETE /deleteCourse/:id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .delete(\&quot;/deleteCourse/1\&quot;)\n  .query({ creator_id: 10 });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8936e5c-bc20-43e3-b5e3-3d2df4b5402d&quot;,&quot;parentUUID&quot;:&quot;e4a552bf-c4fb-4c79-94c2-cc1008e31cfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;483f8526-501a-416d-961e-3e851bfd9cd5&quot;,&quot;d4fcd644-8f9d-4dee-8600-75cfcf01ccf4&quot;,&quot;d0d9f7fb-4fcf-4877-a4f6-4c6c353ad0c5&quot;,&quot;c8936e5c-bc20-43e3-b5e3-3d2df4b5402d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64983be3-b324-4348-94f2-b711358406c1&quot;,&quot;title&quot;:&quot;GET /providerCourses&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return provider courses when creator_id is provided&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerCourses should return provider courses when creator_id is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourses = [{ course_id: 1, creator_id: 10, name: \&quot;Provider Course\&quot; }];\nstub(CourseModel, \&quot;getProviderCourses\&quot;).resolves(dummyCourses);\nconst res = await request(app)\n  .get(\&quot;/providerCourses\&quot;)\n  .query({ id: 10 });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ data: dummyCourses });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba3c64db-8cfa-4b0e-8131-7497f975f8ad&quot;,&quot;parentUUID&quot;:&quot;64983be3-b324-4348-94f2-b711358406c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerCourses should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/providerCourses\&quot;);\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;creator_id is required\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c5b348a-0e63-438e-8177-c0ce09eeeee5&quot;,&quot;parentUUID&quot;:&quot;64983be3-b324-4348-94f2-b711358406c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerCourses should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getProviderCourses\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/providerCourses\&quot;)\n  .query({ id: 10 });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d0240f2-b6f4-43e7-8e5e-4874684f5972&quot;,&quot;parentUUID&quot;:&quot;64983be3-b324-4348-94f2-b711358406c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba3c64db-8cfa-4b0e-8131-7497f975f8ad&quot;,&quot;4c5b348a-0e63-438e-8177-c0ce09eeeee5&quot;,&quot;3d0240f2-b6f4-43e7-8e5e-4874684f5972&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8308cfb1-7d31-4dd8-9868-79926c118682&quot;,&quot;title&quot;:&quot;GET /courseEnrolledStudents&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrolled students for a course&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseEnrolledStudents should return enrolled students for a course&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyStudents = [{ student_id: 1, name: \&quot;Student A\&quot; }];\nstub(CourseModel, \&quot;getEnrolledStudentsForCourse\&quot;).resolves(dummyStudents);\nconst res = await request(app)\n  .get(\&quot;/courseEnrolledStudents\&quot;)\n  .query({ courseId: 1 });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ data: dummyStudents });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0101ca96-986f-4fe7-baf2-c455d76ec10e&quot;,&quot;parentUUID&quot;:&quot;8308cfb1-7d31-4dd8-9868-79926c118682&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if courseId is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseEnrolledStudents should return 400 if courseId is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .get(\&quot;/courseEnrolledStudents\&quot;)\n  .query({});\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;course_id is required\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dec855b6-8491-4ddf-a37a-50073d787e56&quot;,&quot;parentUUID&quot;:&quot;8308cfb1-7d31-4dd8-9868-79926c118682&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseEnrolledStudents should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getEnrolledStudentsForCourse\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/courseEnrolledStudents\&quot;)\n  .query({ courseId: 1 });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b8f16b5-4f3f-47ea-a0e9-bb713cce71e2&quot;,&quot;parentUUID&quot;:&quot;8308cfb1-7d31-4dd8-9868-79926c118682&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0101ca96-986f-4fe7-baf2-c455d76ec10e&quot;,&quot;dec855b6-8491-4ddf-a37a-50073d787e56&quot;,&quot;8b8f16b5-4f3f-47ea-a0e9-bb713cce71e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;942dedaa-3fcf-4218-a595-de8ecff6c3de&quot;,&quot;title&quot;:&quot;GET /providerEnrollments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrolled students for provider&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerEnrollments should return enrolled students for provider&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyStudents = [{ student_id: 1, name: \&quot;Student A\&quot; }];\nstub(CourseModel, \&quot;getEnrolledStudentsForProvider\&quot;).resolves(dummyStudents);\nconst res = await request(app)\n  .get(\&quot;/providerEnrollments\&quot;)\n  .query({ creator_id: 10 });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ data: dummyStudents });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4578df7-fc09-4d77-89c9-d23b1f8d2592&quot;,&quot;parentUUID&quot;:&quot;942dedaa-3fcf-4218-a595-de8ecff6c3de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerEnrollments should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/providerEnrollments\&quot;);\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;creator_id is required\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62761dfd-035e-4537-84f1-62b3349e1744&quot;,&quot;parentUUID&quot;:&quot;942dedaa-3fcf-4218-a595-de8ecff6c3de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /providerEnrollments should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getEnrolledStudentsForProvider\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/providerEnrollments\&quot;)\n  .query({ creator_id: 10 });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;091cfef2-13f1-4cbf-8f2b-4721d07ce3f1&quot;,&quot;parentUUID&quot;:&quot;942dedaa-3fcf-4218-a595-de8ecff6c3de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4578df7-fc09-4d77-89c9-d23b1f8d2592&quot;,&quot;62761dfd-035e-4537-84f1-62b3349e1744&quot;,&quot;091cfef2-13f1-4cbf-8f2b-4721d07ce3f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4a96f185-b870-4f84-aa0c-e60dd104531b&quot;,&quot;title&quot;:&quot;POST /courseModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a course module successfully&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests POST /courseModule should add a course module successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModuleResult = { module_id: 555 };\nstub(CourseModel, \&quot;addModule\&quot;).resolves(dummyModuleResult);\nconst moduleData = { course_id: 1, title: \&quot;New Module\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courseModule\&quot;)\n  .send(moduleData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Course module added successfully!\&quot;,\n  module_id: dummyModuleResult.module_id\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37861c50-a545-49c6-b011-49f47af4c778&quot;,&quot;parentUUID&quot;:&quot;4a96f185-b870-4f84-aa0c-e60dd104531b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests POST /courseModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;addModule\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst moduleData = { course_id: 1, title: \&quot;New Module\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courseModule\&quot;)\n  .send(moduleData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba514f95-c271-47b9-b336-294a0be3e267&quot;,&quot;parentUUID&quot;:&quot;4a96f185-b870-4f84-aa0c-e60dd104531b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37861c50-a545-49c6-b011-49f47af4c778&quot;,&quot;ba514f95-c271-47b9-b336-294a0be3e267&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51015f3f-4981-4377-a3ba-d0b90a225dc3&quot;,&quot;title&quot;:&quot;GET /courseModules&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return course modules&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseModules should return course modules&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModules = [{ module_id: 1, title: \&quot;Module 1\&quot; }];\nstub(CourseModel, \&quot;getModules\&quot;).resolves(dummyModules);\nconst res = await request(app)\n  .get(\&quot;/courseModules\&quot;)\n  .query({ course_id: \&quot;1\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ data: dummyModules });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a0eeea1-b331-4248-a305-3d854e29d8d4&quot;,&quot;parentUUID&quot;:&quot;51015f3f-4981-4377-a3ba-d0b90a225dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if course_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseModules should return 400 if course_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/courseModules\&quot;).query({});\nexpect(res.status).to.equal(400);\nexpect(res.body).to.deep.equal({ error: \&quot;course_id is required\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a27e2e67-8e66-4008-af3e-8411a8ac9401&quot;,&quot;parentUUID&quot;:&quot;51015f3f-4981-4377-a3ba-d0b90a225dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests GET /courseModules should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getModules\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/courseModules\&quot;)\n  .query({ course_id: \&quot;1\&quot; });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44bb93d0-03f6-4124-882c-4a4ccafca9b7&quot;,&quot;parentUUID&quot;:&quot;51015f3f-4981-4377-a3ba-d0b90a225dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a0eeea1-b331-4248-a305-3d854e29d8d4&quot;,&quot;a27e2e67-8e66-4008-af3e-8411a8ac9401&quot;,&quot;44bb93d0-03f6-4124-882c-4a4ccafca9b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eaad3fdc-c463-40da-8161-eaed265eb3fc&quot;,&quot;title&quot;:&quot;PUT /courseModule/:module_id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a course module successfully&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests PUT /courseModule/:module_id should update a course module successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;updateModule\&quot;).resolves(true);\nconst updateData = { title: \&quot;Updated Module\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courseModule/123\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Module updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9f7c84a-f103-4f6f-9613-a31947decdae&quot;,&quot;parentUUID&quot;:&quot;eaad3fdc-c463-40da-8161-eaed265eb3fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if module not found or not updated&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests PUT /courseModule/:module_id should return 404 if module not found or not updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;updateModule\&quot;).resolves(false);\nconst updateData = { title: \&quot;Updated Module\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courseModule/123\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Module not found or not updated\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a82e79-f3db-413d-bab8-ea3d894c948d&quot;,&quot;parentUUID&quot;:&quot;eaad3fdc-c463-40da-8161-eaed265eb3fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Blackbox Tests PUT /courseModule/:module_id should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;updateModule\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { title: \&quot;Updated Module\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courseModule/123\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;608a6a6b-e5a8-4e6a-97e8-d28cb3349ba8&quot;,&quot;parentUUID&quot;:&quot;eaad3fdc-c463-40da-8161-eaed265eb3fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9f7c84a-f103-4f6f-9613-a31947decdae&quot;,&quot;a3a82e79-f3db-413d-bab8-ea3d894c948d&quot;,&quot;608a6a6b-e5a8-4e6a-97e8-d28cb3349ba8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5140047-485b-4a94-be97-0fa37c5877b6&quot;,&quot;title&quot;:&quot;CourseEnrollmentController Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseEnrollmentController Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests \&quot;after each\&quot; hook in \&quot;CourseEnrollmentController Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a2da36b-3c23-4539-91f0-253a72158cbf&quot;,&quot;parentUUID&quot;:&quot;c5140047-485b-4a94-be97-0fa37c5877b6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b585ba18-7645-45f3-8ac5-a4100edbf9a6&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/enrollments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all enrollments&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollments should return all enrollments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollments = [{ enrollment_id: 1, userId: 10 }];\nstub(EnrollmentModel, \&quot;getAll\&quot;).resolves(dummyEnrollments);\nconst res = await request(app).get(\&quot;/courses/123/enrollments\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyEnrollments);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ee47315-2fb0-4cf6-aaea-a38ccb406a6a&quot;,&quot;parentUUID&quot;:&quot;b585ba18-7645-45f3-8ac5-a4100edbf9a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollments should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/courses/123/enrollments\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c5e551e-5386-4446-8204-7a01e0d150cd&quot;,&quot;parentUUID&quot;:&quot;b585ba18-7645-45f3-8ac5-a4100edbf9a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ee47315-2fb0-4cf6-aaea-a38ccb406a6a&quot;,&quot;4c5e551e-5386-4446-8204-7a01e0d150cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c16b8fe3-831d-4eec-9dc4-ee19a6741983&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/enrollments/:enrollmentId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrollment by id if found&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollments/:enrollmentId should return enrollment by id if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollment = { enrollment_id: 1, userId: 10 };\nstub(EnrollmentModel, \&quot;getById\&quot;).resolves(dummyEnrollment);\nconst res = await request(app).get(\&quot;/courses/123/enrollments/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyEnrollment);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24bf2905-4f33-475b-8d27-92aa12f2e04f&quot;,&quot;parentUUID&quot;:&quot;c16b8fe3-831d-4eec-9dc4-ee19a6741983&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if enrollment not found&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollments/:enrollmentId should return 404 if enrollment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;getById\&quot;).resolves(null);\nconst res = await request(app).get(\&quot;/courses/123/enrollments/999\&quot;);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Enrollment not found\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8191d6d-819b-4423-96e8-e195825d3153&quot;,&quot;parentUUID&quot;:&quot;c16b8fe3-831d-4eec-9dc4-ee19a6741983&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollments/:enrollmentId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/courses/123/enrollments/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d6eccad-5d6d-44e4-b25e-f34a24d73ea6&quot;,&quot;parentUUID&quot;:&quot;c16b8fe3-831d-4eec-9dc4-ee19a6741983&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24bf2905-4f33-475b-8d27-92aa12f2e04f&quot;,&quot;b8191d6d-819b-4423-96e8-e195825d3153&quot;,&quot;4d6eccad-5d6d-44e4-b25e-f34a24d73ea6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;453bf1df-83b7-4188-9a34-66a897d8ab41&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/enrollment-check&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrollment status&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollment-check should return enrollment status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;checkUserEnrollment\&quot;).resolves(true);\nconst res = await request(app)\n  .get(\&quot;/courses/123/enrollment-check\&quot;)\n  .query({ userId: \&quot;10\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ isEnrolled: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9468b241-ca5c-416c-8f00-b0fca73e129a&quot;,&quot;parentUUID&quot;:&quot;453bf1df-83b7-4188-9a34-66a897d8ab41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests GET /courses/:courseId/enrollment-check should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;checkUserEnrollment\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/courses/123/enrollment-check\&quot;)\n  .query({ userId: \&quot;10\&quot; });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3fbc28c-0f52-48f1-a703-9afa20c99f8e&quot;,&quot;parentUUID&quot;:&quot;453bf1df-83b7-4188-9a34-66a897d8ab41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9468b241-ca5c-416c-8f00-b0fca73e129a&quot;,&quot;f3fbc28c-0f52-48f1-a703-9afa20c99f8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;813edad1-8181-49de-8a63-138aee43e4e4&quot;,&quot;title&quot;:&quot;POST /courses/:courseId/enrollments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create an enrollment successfully&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests POST /courses/:courseId/enrollments should create an enrollment successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollment = { enrollment_id: 50 };\nstub(EnrollmentModel, \&quot;create\&quot;).resolves(dummyEnrollment);\nconst enrollmentData = { userId: 10, courseId: \&quot;123\&quot;, status: \&quot;active\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courses/123/enrollments\&quot;)\n  .send(enrollmentData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Enrollment created successfully\&quot;,\n  enrollment_id: dummyEnrollment.enrollment_id,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;093c52da-fd11-45bd-becf-1690cc6cf151&quot;,&quot;parentUUID&quot;:&quot;813edad1-8181-49de-8a63-138aee43e4e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests POST /courses/:courseId/enrollments should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst enrollmentData = { userId: 10, courseId: \&quot;123\&quot;, status: \&quot;active\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courses/123/enrollments\&quot;)\n  .send(enrollmentData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd9e45f1-4da2-4351-bbb3-3b09e3540e05&quot;,&quot;parentUUID&quot;:&quot;813edad1-8181-49de-8a63-138aee43e4e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;093c52da-fd11-45bd-becf-1690cc6cf151&quot;,&quot;cd9e45f1-4da2-4351-bbb3-3b09e3540e05&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a97b69f6-46ad-41bb-83e0-0a28b5e3de68&quot;,&quot;title&quot;:&quot;PUT /courses/:courseId/enrollments/:enrollmentId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update an enrollment successfully&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests PUT /courses/:courseId/enrollments/:enrollmentId should update an enrollment successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;update\&quot;).resolves();\nconst updateData = { status: \&quot;completed\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/123/enrollments/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Enrollment updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8692bfae-d08e-4d3a-81d9-88ad9f09cc30&quot;,&quot;parentUUID&quot;:&quot;a97b69f6-46ad-41bb-83e0-0a28b5e3de68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests PUT /courses/:courseId/enrollments/:enrollmentId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { status: \&quot;completed\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/123/enrollments/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78a282c6-b233-43a1-989f-844ac0c9a39d&quot;,&quot;parentUUID&quot;:&quot;a97b69f6-46ad-41bb-83e0-0a28b5e3de68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8692bfae-d08e-4d3a-81d9-88ad9f09cc30&quot;,&quot;78a282c6-b233-43a1-989f-844ac0c9a39d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ca79ddb1-d789-4ced-ad9f-c2efe2713579&quot;,&quot;title&quot;:&quot;DELETE /courses/:courseId/enrollments/:enrollmentId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseEnrollmentController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete an enrollment successfully&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests DELETE /courses/:courseId/enrollments/:enrollmentId should delete an enrollment successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;delete\&quot;).resolves();\nconst res = await request(app).delete(\&quot;/courses/123/enrollments/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Enrollment deleted successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2ed112d-e7de-4700-8f07-b24e31eda2a0&quot;,&quot;parentUUID&quot;:&quot;ca79ddb1-d789-4ced-ad9f-c2efe2713579&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Blackbox Tests DELETE /courses/:courseId/enrollments/:enrollmentId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).delete(\&quot;/courses/123/enrollments/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;092e06af-deac-4a82-8f15-a5a5870e7795&quot;,&quot;parentUUID&quot;:&quot;ca79ddb1-d789-4ced-ad9f-c2efe2713579&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2ed112d-e7de-4700-8f07-b24e31eda2a0&quot;,&quot;092e06af-deac-4a82-8f15-a5a5870e7795&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b2f7588f-76c6-4bc7-86c5-23483f75ced6&quot;,&quot;title&quot;:&quot;CourseModuleController Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseModuleController Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests \&quot;after each\&quot; hook in \&quot;CourseModuleController Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;348accce-625c-4a0c-936d-723bbc1409b2&quot;,&quot;parentUUID&quot;:&quot;b2f7588f-76c6-4bc7-86c5-23483f75ced6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9aa30649-82ec-49d2-8d4d-34f7e1432585&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/modules&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all modules for the given course&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests GET /courses/:courseId/modules should return all modules for the given course&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModules = [{ module_id: 1, moduleName: \&quot;Module 1\&quot; }];\nstub(CourseModuleModel, \&quot;getAllForCourse\&quot;).resolves(dummyModules);\nconst res = await request(app).get(\&quot;/courses/100/modules\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyModules);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23012b7f-5ffd-4313-bd0a-357f797aa34a&quot;,&quot;parentUUID&quot;:&quot;9aa30649-82ec-49d2-8d4d-34f7e1432585&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests GET /courses/:courseId/modules should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;getAllForCourse\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/courses/100/modules\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d933181f-b40b-437b-8225-6ccc21b1cb4f&quot;,&quot;parentUUID&quot;:&quot;9aa30649-82ec-49d2-8d4d-34f7e1432585&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;23012b7f-5ffd-4313-bd0a-357f797aa34a&quot;,&quot;d933181f-b40b-437b-8225-6ccc21b1cb4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c03d4ce0-1a2d-412e-bbe1-b1791a8ac9ec&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/modules/:moduleId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return module data if found&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests GET /courses/:courseId/modules/:moduleId should return module data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModule = { module_id: 2, moduleName: \&quot;Module 2\&quot; };\nstub(CourseModuleModel, \&quot;getById\&quot;).resolves(dummyModule);\nconst res = await request(app).get(\&quot;/courses/100/modules/2\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyModule);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd8ec31c-216a-4ce8-abee-5622aac0b55b&quot;,&quot;parentUUID&quot;:&quot;c03d4ce0-1a2d-412e-bbe1-b1791a8ac9ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if module not found&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests GET /courses/:courseId/modules/:moduleId should return 404 if module not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;getById\&quot;).resolves(null);\nconst res = await request(app).get(\&quot;/courses/100/modules/999\&quot;);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Module not found\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0e747b9-b4fa-4be4-860a-259426666e05&quot;,&quot;parentUUID&quot;:&quot;c03d4ce0-1a2d-412e-bbe1-b1791a8ac9ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests GET /courses/:courseId/modules/:moduleId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/courses/100/modules/2\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c60e2749-0b1b-4d7d-b29e-dce370a87e4e&quot;,&quot;parentUUID&quot;:&quot;c03d4ce0-1a2d-412e-bbe1-b1791a8ac9ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd8ec31c-216a-4ce8-abee-5622aac0b55b&quot;,&quot;a0e747b9-b4fa-4be4-860a-259426666e05&quot;,&quot;c60e2749-0b1b-4d7d-b29e-dce370a87e4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f2c1725-f719-458d-948c-3672dc0784f0&quot;,&quot;title&quot;:&quot;POST /courses/:courseId/modules&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new module and return 201&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests POST /courses/:courseId/modules should create a new module and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModule = { module_id: 55 };\nstub(CourseModuleModel, \&quot;create\&quot;).resolves(dummyModule);\nconst moduleData = { moduleName: \&quot;New Module\&quot;, moduleContent: \&quot;Some content\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courses/100/modules\&quot;)\n  .send(moduleData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Module created successfully\&quot;,\n  moduleId: dummyModule.module_id\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aef5cbd7-b1f6-4c71-8164-c5b1347d0139&quot;,&quot;parentUUID&quot;:&quot;9f2c1725-f719-458d-948c-3672dc0784f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests POST /courses/:courseId/modules should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst moduleData = { moduleName: \&quot;New Module\&quot;, moduleContent: \&quot;Some content\&quot; };\nconst res = await request(app)\n  .post(\&quot;/courses/100/modules\&quot;)\n  .send(moduleData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd5e7cee-db40-4a27-b66a-f079279d0b77&quot;,&quot;parentUUID&quot;:&quot;9f2c1725-f719-458d-948c-3672dc0784f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aef5cbd7-b1f6-4c71-8164-c5b1347d0139&quot;,&quot;bd5e7cee-db40-4a27-b66a-f079279d0b77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5bd3a0d5-542b-44fc-aad8-89242660fee1&quot;,&quot;title&quot;:&quot;PUT /courses/:courseId/modules/:moduleId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a module and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests PUT /courses/:courseId/modules/:moduleId should update a module and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;update\&quot;).resolves();\nconst updateData = { moduleName: \&quot;Updated Name\&quot;, moduleContent: \&quot;Updated content\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/100/modules/55\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Module updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27cd4e33-c7ce-4e40-bf35-0f459116ef13&quot;,&quot;parentUUID&quot;:&quot;5bd3a0d5-542b-44fc-aad8-89242660fee1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests PUT /courses/:courseId/modules/:moduleId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { moduleName: \&quot;Updated Name\&quot;, moduleContent: \&quot;Updated content\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/100/modules/55\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7a86b95-62d4-4e31-8adf-750c332da995&quot;,&quot;parentUUID&quot;:&quot;5bd3a0d5-542b-44fc-aad8-89242660fee1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27cd4e33-c7ce-4e40-bf35-0f459116ef13&quot;,&quot;c7a86b95-62d4-4e31-8adf-750c332da995&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4066fc08-2b45-40fc-9b6f-b45f15142db4&quot;,&quot;title&quot;:&quot;DELETE /courses/:courseId/modules/:moduleId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseModuleController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a module and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests DELETE /courses/:courseId/modules/:moduleId should delete a module and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;delete\&quot;).resolves();\nconst res = await request(app).delete(\&quot;/courses/100/modules/55\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Module deleted successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b1c5704-6027-4414-af2f-20e5caf886db&quot;,&quot;parentUUID&quot;:&quot;4066fc08-2b45-40fc-9b6f-b45f15142db4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Blackbox Tests DELETE /courses/:courseId/modules/:moduleId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).delete(\&quot;/courses/100/modules/55\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1304730c-5f29-4a54-a085-33ee30f940f9&quot;,&quot;parentUUID&quot;:&quot;4066fc08-2b45-40fc-9b6f-b45f15142db4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b1c5704-6027-4414-af2f-20e5caf886db&quot;,&quot;1304730c-5f29-4a54-a085-33ee30f940f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3ac849bc-f0fc-4fc2-9efe-d20b5cbc246a&quot;,&quot;title&quot;:&quot;CourseReviewController Blackbox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseReviewController Blackbox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests \&quot;after each\&quot; hook in \&quot;CourseReviewController Blackbox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;137ecc96-a8ec-4983-858e-3a6e232c0690&quot;,&quot;parentUUID&quot;:&quot;3ac849bc-f0fc-4fc2-9efe-d20b5cbc246a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;33927172-fbbe-438c-b3d9-a0e03a8b3bd8&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/reviews&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return reviews for the given course (with query)&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews should return reviews for the given course (with query)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyReviews = [{ reviewId: 1, rating: 5 }];\nstub(CourseReviewModel, \&quot;getReviews\&quot;).resolves(dummyReviews);\nconst res = await request(app)\n  .get(\&quot;/courses/100/reviews\&quot;)\n  .query({ externalReferenceNumber: \&quot;abc123\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyReviews);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c4e16c6-0dda-415d-8fef-cd578ba63bc2&quot;,&quot;parentUUID&quot;:&quot;33927172-fbbe-438c-b3d9-a0e03a8b3bd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return reviews using the /courses/reviews endpoint&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews should return reviews using the /courses/reviews endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyReviews = [{ reviewId: 2, rating: 4 }];\nstub(CourseReviewModel, \&quot;getReviews\&quot;).resolves(dummyReviews);\nconst res = await request(app)\n  .get(\&quot;/courses/reviews\&quot;)\n  .query({ courseId: \&quot;100\&quot;, externalReferenceNumber: \&quot;xyz789\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyReviews);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ab63570-5ed3-4fb9-a034-bcdd2b0f25bf&quot;,&quot;parentUUID&quot;:&quot;33927172-fbbe-438c-b3d9-a0e03a8b3bd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;getReviews\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app)\n  .get(\&quot;/courses/100/reviews\&quot;)\n  .query({ externalReferenceNumber: \&quot;abc123\&quot; });\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08526b02-8659-4bf0-bc1b-2959d5d63d53&quot;,&quot;parentUUID&quot;:&quot;33927172-fbbe-438c-b3d9-a0e03a8b3bd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c4e16c6-0dda-415d-8fef-cd578ba63bc2&quot;,&quot;0ab63570-5ed3-4fb9-a034-bcdd2b0f25bf&quot;,&quot;08526b02-8659-4bf0-bc1b-2959d5d63d53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d7d9402-2791-4d30-b435-c697a919d2b8&quot;,&quot;title&quot;:&quot;GET /courses/:courseId/reviews/:reviewId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return review data if found&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews/:reviewId should return review data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyReview = { reviewId: 1, rating: 5, comment: \&quot;Great!\&quot; };\nstub(CourseReviewModel, \&quot;getById\&quot;).resolves(dummyReview);\nconst res = await request(app).get(\&quot;/courses/100/reviews/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal(dummyReview);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11544c8f-4a54-4640-b44b-1ae5f41c321b&quot;,&quot;parentUUID&quot;:&quot;4d7d9402-2791-4d30-b435-c697a919d2b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if review is not found&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews/:reviewId should return 404 if review is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;getById\&quot;).resolves(null);\nconst res = await request(app).get(\&quot;/courses/100/reviews/999\&quot;);\nexpect(res.status).to.equal(404);\nexpect(res.body).to.deep.equal({ error: \&quot;Review not found\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3be3fc07-b70c-4779-9e74-c54c864df7cb&quot;,&quot;parentUUID&quot;:&quot;4d7d9402-2791-4d30-b435-c697a919d2b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests GET /courses/:courseId/reviews/:reviewId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).get(\&quot;/courses/100/reviews/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;869657ba-a9a3-485f-ada3-909c5ca0d22a&quot;,&quot;parentUUID&quot;:&quot;4d7d9402-2791-4d30-b435-c697a919d2b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11544c8f-4a54-4640-b44b-1ae5f41c321b&quot;,&quot;3be3fc07-b70c-4779-9e74-c54c864df7cb&quot;,&quot;869657ba-a9a3-485f-ada3-909c5ca0d22a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d2fcb51-a453-49a4-980e-b2472a79f0c7&quot;,&quot;title&quot;:&quot;POST /courses/:courseId/reviews&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a review successfully using courseId in path&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests POST /courses/:courseId/reviews should create a review successfully using courseId in path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyResult = { reviewId: 10 };\nstub(CourseReviewModel, \&quot;createReview\&quot;).resolves(dummyResult);\nconst reviewData = {\n  rating: 5,\n  comment: \&quot;Excellent course\&quot;,\n  userId: 20,\n  externalReferenceNumber: \&quot;ext-001\&quot;\n};\nconst res = await request(app)\n  .post(\&quot;/courses/100/reviews\&quot;)\n  .send(reviewData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Review created successfully\&quot;,\n  reviewId: dummyResult.reviewId\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c7d36c2-a792-450c-91a4-63a5692e4b64&quot;,&quot;parentUUID&quot;:&quot;6d2fcb51-a453-49a4-980e-b2472a79f0c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a review successfully using /courses/reviews endpoint&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests POST /courses/:courseId/reviews should create a review successfully using /courses/reviews endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyResult = { reviewId: 11 };\nstub(CourseReviewModel, \&quot;createReview\&quot;).resolves(dummyResult);\nconst reviewData = {\n  rating: 4,\n  comment: \&quot;Good course\&quot;,\n  userId: 30,\n  externalReferenceNumber: \&quot;ext-002\&quot;\n};\nconst res = await request(app)\n  .post(\&quot;/courses/reviews\&quot;)\n  .send(reviewData);\nexpect(res.status).to.equal(201);\nexpect(res.body).to.deep.equal({\n  message: \&quot;Review created successfully\&quot;,\n  reviewId: dummyResult.reviewId\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6c21142-af89-4b59-8d9a-f06fe0a4e213&quot;,&quot;parentUUID&quot;:&quot;6d2fcb51-a453-49a4-980e-b2472a79f0c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests POST /courses/:courseId/reviews should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;createReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst reviewData = {\n  rating: 4,\n  comment: \&quot;Good course\&quot;,\n  userId: 30,\n  externalReferenceNumber: \&quot;ext-002\&quot;\n};\nconst res = await request(app)\n  .post(\&quot;/courses/100/reviews\&quot;)\n  .send(reviewData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56083f2e-9118-4efa-9561-feea22c9e595&quot;,&quot;parentUUID&quot;:&quot;6d2fcb51-a453-49a4-980e-b2472a79f0c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c7d36c2-a792-450c-91a4-63a5692e4b64&quot;,&quot;b6c21142-af89-4b59-8d9a-f06fe0a4e213&quot;,&quot;56083f2e-9118-4efa-9561-feea22c9e595&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80803fc0-f123-4fd9-9c38-fa871c1c9891&quot;,&quot;title&quot;:&quot;PUT /courses/reviews/:reviewId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a review successfully&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests PUT /courses/reviews/:reviewId should update a review successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;updateReview\&quot;).resolves();\nconst updateData = { rating: 3, comment: \&quot;Average course\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/reviews/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Review updated successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e1b7e41-4e8b-42ed-acdf-074c2832b312&quot;,&quot;parentUUID&quot;:&quot;80803fc0-f123-4fd9-9c38-fa871c1c9891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests PUT /courses/reviews/:reviewId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;updateReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst updateData = { rating: 3, comment: \&quot;Average course\&quot; };\nconst res = await request(app)\n  .put(\&quot;/courses/reviews/1\&quot;)\n  .send(updateData);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a91a0b3-53e4-4c03-b87e-6f48f9ad4a66&quot;,&quot;parentUUID&quot;:&quot;80803fc0-f123-4fd9-9c38-fa871c1c9891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e1b7e41-4e8b-42ed-acdf-074c2832b312&quot;,&quot;9a91a0b3-53e4-4c03-b87e-6f48f9ad4a66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a08bcc85-3982-4281-a6a0-6aca033bc249&quot;,&quot;title&quot;:&quot;DELETE /courses/reviews/:reviewId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\integration\\controller\\CourseReviewController.blackbox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a review successfully&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests DELETE /courses/reviews/:reviewId should delete a review successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;deleteReview\&quot;).resolves();\nconst res = await request(app).delete(\&quot;/courses/reviews/1\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.deep.equal({ message: \&quot;Review deleted successfully\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf3598b8-9b5c-42f3-b477-00e91da7bf24&quot;,&quot;parentUUID&quot;:&quot;a08bcc85-3982-4281-a6a0-6aca033bc249&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Blackbox Tests DELETE /courses/reviews/:reviewId should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;deleteReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nconst res = await request(app).delete(\&quot;/courses/reviews/1\&quot;);\nexpect(res.status).to.equal(500);\nexpect(res.body).to.deep.equal({ error: \&quot;Database query failed\&quot; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebe9853c-e05c-4cd5-b68f-3cd94fd23ec1&quot;,&quot;parentUUID&quot;:&quot;a08bcc85-3982-4281-a6a0-6aca033bc249&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf3598b8-9b5c-42f3-b477-00e91da7bf24&quot;,&quot;ebe9853c-e05c-4cd5-b68f-3cd94fd23ec1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffd39d47-ad04-4790-9b61-622620328bf7&quot;,&quot;title&quot;:&quot;AdminController&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;AdminController\&quot;&quot;,&quot;fullTitle&quot;:&quot;AdminController \&quot;before each\&quot; hook in \&quot;AdminController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  query: {},\n  body: {}\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbf69c7a-fba2-472f-b810-931d88f6e2f9&quot;,&quot;parentUUID&quot;:&quot;ffd39d47-ad04-4790-9b61-622620328bf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;AdminController\&quot;&quot;,&quot;fullTitle&quot;:&quot;AdminController \&quot;after each\&quot; hook in \&quot;AdminController\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95d42e01-3fef-43b0-9a70-c8931d19e993&quot;,&quot;parentUUID&quot;:&quot;ffd39d47-ad04-4790-9b61-622620328bf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;title&quot;:&quot;getAdminTableData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if the table query parameter is missing&quot;,&quot;fullTitle&quot;:&quot;AdminController getAdminTableData should return 400 if the table query parameter is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = {};\nawait getAdminTableData(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Invalid table name\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af012b5-9bbb-4b76-aec6-8a7e343a5a6d&quot;,&quot;parentUUID&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if the table query parameter is invalid&quot;,&quot;fullTitle&quot;:&quot;AdminController getAdminTableData should return 400 if the table query parameter is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;NonExistingTable\&quot; };\nawait getAdminTableData(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Invalid table name\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61e29f19-5cad-4762-ba81-fa2caaa293ee&quot;,&quot;parentUUID&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query admin data correctly for Admin table&quot;,&quot;fullTitle&quot;:&quot;AdminController getAdminTableData should query admin data correctly for Admin table&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Admin\&quot; };\nconst fakeRows = [{ user_id: 1, username: \&quot;admin\&quot; }];\nconst dbQueryStub = stub(db, \&quot;query\&quot;).resolves([fakeRows]);\nawait getAdminTableData(req, res);\nexpect(dbQueryStub.calledOnce).to.be.true;\nexpect(\n  dbQueryStub.calledWithExactly(\&quot;SELECT * FROM ?? WHERE role = ?\&quot;, [\n    \&quot;UserAccount\&quot;,\n    \&quot;admin\&quot;\n  ])\n).to.be.true;\nexpect(res.json.calledWith(fakeRows)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53e1e329-9aa8-417b-b83c-5b7bb5930670&quot;,&quot;parentUUID&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query non-admin table correctly&quot;,&quot;fullTitle&quot;:&quot;AdminController getAdminTableData should query non-admin table correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Courses\&quot; };\nconst fakeRows = [{ course_id: 101, course_name: \&quot;Course 101\&quot; }];\nconst dbQueryStub = stub(db, \&quot;query\&quot;).resolves([fakeRows]);\nawait getAdminTableData(req, res);\nexpect(dbQueryStub.calledOnce).to.be.true;\nexpect(dbQueryStub.calledWithExactly(\&quot;SELECT * FROM ??\&quot;, [\&quot;Course\&quot;])).to.be.true;\nexpect(res.json.calledWith(fakeRows)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cbd4d14-af51-4d85-980a-c70341f1f96d&quot;,&quot;parentUUID&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if db.query throws an error&quot;,&quot;fullTitle&quot;:&quot;AdminController getAdminTableData should return 500 if db.query throws an error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Courses\&quot; };\nstub(db, \&quot;query\&quot;).rejects(new Error(\&quot;Database error\&quot;));\nawait getAdminTableData(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Internal server error\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c72d50cf-e86e-4f24-9464-4971e47b212c&quot;,&quot;parentUUID&quot;:&quot;9f837997-53a2-44b5-8e7c-cc98fd12639c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3af012b5-9bbb-4b76-aec6-8a7e343a5a6d&quot;,&quot;61e29f19-5cad-4762-ba81-fa2caaa293ee&quot;,&quot;53e1e329-9aa8-417b-b83c-5b7bb5930670&quot;,&quot;1cbd4d14-af51-4d85-980a-c70341f1f96d&quot;,&quot;c72d50cf-e86e-4f24-9464-4971e47b212c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;393373b8-4cb9-44f8-a4da-0832fff15300&quot;,&quot;title&quot;:&quot;updateAdminTableData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\AdminController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if the table query parameter is missing&quot;,&quot;fullTitle&quot;:&quot;AdminController updateAdminTableData should return 400 if the table query parameter is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = {};\nreq.body = { data: [] };\nawait updateAdminTableData(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Invalid table name\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1bcb65b-b2ff-4048-ad8f-68c5ce7eb5d9&quot;,&quot;parentUUID&quot;:&quot;393373b8-4cb9-44f8-a4da-0832fff15300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if data is missing or not an array&quot;,&quot;fullTitle&quot;:&quot;AdminController updateAdminTableData should return 400 if data is missing or not an array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Courses\&quot; };\nreq.body = { data: \&quot;notAnArray\&quot; };\nawait updateAdminTableData(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(\n  res.json.calledWith({ error: \&quot;Invalid data format, expected an array\&quot; })\n).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0373f2b7-d560-41bb-9d85-74607e6f8fc8&quot;,&quot;parentUUID&quot;:&quot;393373b8-4cb9-44f8-a4da-0832fff15300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should process update requests correctly&quot;,&quot;fullTitle&quot;:&quot;AdminController updateAdminTableData should process update requests correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Courses\&quot; };\nreq.body = {\n  data: [\n    {\n      course_id: 101,\n      module_name: \&quot;Updated Course Name\&quot;,\n      created_at: \&quot;2023-04-01T12:00:00Z\&quot;\n    }\n  ]\n};\nconst dbQueryStub = stub(db, \&quot;query\&quot;).resolves();\nawait updateAdminTableData(req, res);\nexpect(dbQueryStub.called).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Data updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f3a1928-f539-4ac6-8c52-0a20e7290df6&quot;,&quot;parentUUID&quot;:&quot;393373b8-4cb9-44f8-a4da-0832fff15300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if any db.query throws an error during update&quot;,&quot;fullTitle&quot;:&quot;AdminController updateAdminTableData should return 500 if any db.query throws an error during update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { table: \&quot;Courses\&quot; };\nreq.body = { data: [{ course_id: 101, module_name: \&quot;Name\&quot; }] };\nstub(db, \&quot;query\&quot;).rejects(new Error(\&quot;Database error\&quot;));\nawait updateAdminTableData(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Internal server error\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;831c53f7-4427-4458-aeda-d199d4670eed&quot;,&quot;parentUUID&quot;:&quot;393373b8-4cb9-44f8-a4da-0832fff15300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1bcb65b-b2ff-4048-ad8f-68c5ce7eb5d9&quot;,&quot;0373f2b7-d560-41bb-9d85-74607e6f8fc8&quot;,&quot;6f3a1928-f539-4ac6-8c52-0a20e7290df6&quot;,&quot;831c53f7-4427-4458-aeda-d199d4670eed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a66cc16c-b59a-4e25-b8cd-c7d379fc1e1f&quot;,&quot;title&quot;:&quot;Certificate Controller Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CertificateController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CertificateController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Certificate Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Whitebox Tests \&quot;before each\&quot; hook in \&quot;Certificate Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  body: {},\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a9eb679-3085-4f84-b1ea-acad98ba3749&quot;,&quot;parentUUID&quot;:&quot;a66cc16c-b59a-4e25-b8cd-c7d379fc1e1f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Certificate Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Whitebox Tests \&quot;after each\&quot; hook in \&quot;Certificate Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d889900-7e99-479c-8fb0-2ddf7163a565&quot;,&quot;parentUUID&quot;:&quot;a66cc16c-b59a-4e25-b8cd-c7d379fc1e1f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;04147d19-7b56-41fd-a13e-13f46315af3c&quot;,&quot;title&quot;:&quot;emailCertificate&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CertificateController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CertificateController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if required certificate data is missing&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Whitebox Tests emailCertificate should return 400 if required certificate data is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { email: \&quot;user@example.com\&quot;, username: \&quot;User\&quot; };\nawait certificateController.emailCertificate(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Missing required certificate data\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22614305-5798-4137-9ca6-f3961a915974&quot;,&quot;parentUUID&quot;:&quot;04147d19-7b56-41fd-a13e-13f46315af3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should email certificate successfully&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Whitebox Tests emailCertificate should email certificate successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyPdfBuffer = Buffer.from(\&quot;dummy pdf\&quot;);\nconst dummyEmailResponse = { status: \&quot;sent\&quot; };\nreq.body = {\n  email: \&quot;user@example.com\&quot;,\n  username: \&quot;User\&quot;,\n  course: \&quot;Course 101\&quot;,\n  date: \&quot;2025-04-01\&quot;\n};\nstub(CertificateService, \&quot;generateCertificatePdf\&quot;).resolves(dummyPdfBuffer);\nstub(GmailService, \&quot;sendCertificateEmail\&quot;).resolves(dummyEmailResponse);\nawait certificateController.emailCertificate(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Certificate emailed successfully\&quot;,\n  emailResponse: dummyEmailResponse\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8da42177-a627-4f93-ac16-fe35d89b275d&quot;,&quot;parentUUID&quot;:&quot;04147d19-7b56-41fd-a13e-13f46315af3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if an error occurs during certificate emailing&quot;,&quot;fullTitle&quot;:&quot;Certificate Controller Whitebox Tests emailCertificate should return 500 if an error occurs during certificate emailing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  email: \&quot;user@example.com\&quot;,\n  username: \&quot;User\&quot;,\n  course: \&quot;Course 101\&quot;,\n  date: \&quot;2025-04-01\&quot;\n};\nstub(CertificateService, \&quot;generateCertificatePdf\&quot;).rejects(new Error(\&quot;Test error\&quot;));\nawait certificateController.emailCertificate(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Failed to email certificate\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5195fca-9dee-4e38-98b2-bb74a275cfd6&quot;,&quot;parentUUID&quot;:&quot;04147d19-7b56-41fd-a13e-13f46315af3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22614305-5798-4137-9ca6-f3961a915974&quot;,&quot;8da42177-a627-4f93-ac16-fe35d89b275d&quot;,&quot;f5195fca-9dee-4e38-98b2-bb74a275cfd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;684cbcbd-dcf6-4be6-af13-72d94dcaa4d3&quot;,&quot;title&quot;:&quot;Feedback Controller Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Feedback Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests \&quot;before each\&quot; hook in \&quot;Feedback Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  params: {},\n  body: {},\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub(),\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa7e6be3-cb78-4ab5-ae65-3ee4e741d6ec&quot;,&quot;parentUUID&quot;:&quot;684cbcbd-dcf6-4be6-af13-72d94dcaa4d3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Feedback Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests \&quot;after each\&quot; hook in \&quot;Feedback Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c756f3d-97bd-471d-b5c0-f70cc908248f&quot;,&quot;parentUUID&quot;:&quot;684cbcbd-dcf6-4be6-af13-72d94dcaa4d3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f32a9934-84d0-48bc-835e-a699a1dbfcbd&quot;,&quot;title&quot;:&quot;getAllFeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all feedback&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests getAllFeedback should return all feedback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyFeedback = [{ id: 1, comment: \&quot;Test comment\&quot; }];\nstub(FeedbackModel, \&quot;getAll\&quot;).resolves(dummyFeedback);\nawait feedbackController.getAllFeedback(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyFeedback)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39971eb1-e404-49ff-a321-8b3e53917801&quot;,&quot;parentUUID&quot;:&quot;f32a9934-84d0-48bc-835e-a699a1dbfcbd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if an error occurs&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests getAllFeedback should return 500 if an error occurs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(FeedbackModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait feedbackController.getAllFeedback(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b3421f1-335e-442b-8f8d-b65114cba4b9&quot;,&quot;parentUUID&quot;:&quot;f32a9934-84d0-48bc-835e-a699a1dbfcbd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39971eb1-e404-49ff-a321-8b3e53917801&quot;,&quot;0b3421f1-335e-442b-8f8d-b65114cba4b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2fb39a4d-4d18-4ca6-82bb-d4f4177e8d43&quot;,&quot;title&quot;:&quot;getFeedbackById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return feedback if found&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests getFeedbackById should return feedback if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyFeedback = { id: 1, comment: \&quot;Test comment\&quot; };\nreq.params.id = \&quot;1\&quot;;\nstub(FeedbackModel, \&quot;getById\&quot;).resolves(dummyFeedback);\nawait feedbackController.getFeedbackById(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyFeedback)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1547d8a7-469b-40d3-8b87-b18b910490f0&quot;,&quot;parentUUID&quot;:&quot;2fb39a4d-4d18-4ca6-82bb-d4f4177e8d43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if feedback not found&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests getFeedbackById should return 404 if feedback not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(FeedbackModel, \&quot;getById\&quot;).resolves(null);\nawait feedbackController.getFeedbackById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Feedback not found\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4fa7a2b-8ccc-4528-ae3e-126d88a7d6ee&quot;,&quot;parentUUID&quot;:&quot;2fb39a4d-4d18-4ca6-82bb-d4f4177e8d43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests getFeedbackById should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(FeedbackModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait feedbackController.getFeedbackById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7637a7e0-f7a3-4ae1-af34-e41b5e68a182&quot;,&quot;parentUUID&quot;:&quot;2fb39a4d-4d18-4ca6-82bb-d4f4177e8d43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1547d8a7-469b-40d3-8b87-b18b910490f0&quot;,&quot;d4fa7a2b-8ccc-4528-ae3e-126d88a7d6ee&quot;,&quot;7637a7e0-f7a3-4ae1-af34-e41b5e68a182&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6765af55-50db-46b1-ad31-144fd3ea80ac&quot;,&quot;title&quot;:&quot;createFeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create feedback and return the inserted id&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests createFeedback should create feedback and return the inserted id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { comment: \&quot;Test comment\&quot; };\nstub(FeedbackModel, \&quot;create\&quot;).resolves(42);\nawait feedbackController.createFeedback(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Feedback submitted successfully\&quot;,\n  feedbackId: 42,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62346091-b55f-461d-8d09-45b690d5cf75&quot;,&quot;parentUUID&quot;:&quot;6765af55-50db-46b1-ad31-144fd3ea80ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests createFeedback should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { comment: \&quot;Test comment\&quot; };\nstub(FeedbackModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait feedbackController.createFeedback(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86a200c3-7633-415f-be37-a4b27735a18e&quot;,&quot;parentUUID&quot;:&quot;6765af55-50db-46b1-ad31-144fd3ea80ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62346091-b55f-461d-8d09-45b690d5cf75&quot;,&quot;86a200c3-7633-415f-be37-a4b27735a18e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc93acfe-88b9-4e7d-8c4e-53a5cd1e5efc&quot;,&quot;title&quot;:&quot;updateFeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update feedback successfully&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests updateFeedback should update feedback successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.body = { comment: \&quot;Updated comment\&quot; };\nstub(FeedbackModel, \&quot;update\&quot;).resolves();\nawait feedbackController.updateFeedback(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Feedback updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc430f2b-b99e-4133-abe3-1c6d33c9e9de&quot;,&quot;parentUUID&quot;:&quot;bc93acfe-88b9-4e7d-8c4e-53a5cd1e5efc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests updateFeedback should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.body = { comment: \&quot;Updated comment\&quot; };\nstub(FeedbackModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait feedbackController.updateFeedback(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9270b655-9e66-420e-95cd-d7e120be9915&quot;,&quot;parentUUID&quot;:&quot;bc93acfe-88b9-4e7d-8c4e-53a5cd1e5efc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc430f2b-b99e-4133-abe3-1c6d33c9e9de&quot;,&quot;9270b655-9e66-420e-95cd-d7e120be9915&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;11b18759-4e48-4427-b5da-5d459c4e3672&quot;,&quot;title&quot;:&quot;deleteFeedback&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\ContactFeedback.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete feedback successfully&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests deleteFeedback should delete feedback successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(FeedbackModel, \&quot;delete\&quot;).resolves();\nawait feedbackController.deleteFeedback(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Feedback deleted successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70a6b9ad-2332-4406-ba22-671a9c94e307&quot;,&quot;parentUUID&quot;:&quot;11b18759-4e48-4427-b5da-5d459c4e3672&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Feedback Controller Whitebox Tests deleteFeedback should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(FeedbackModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait feedbackController.deleteFeedback(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e892bc52-1970-41d5-b4d0-aac65223f89f&quot;,&quot;parentUUID&quot;:&quot;11b18759-4e48-4427-b5da-5d459c4e3672&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70a6b9ad-2332-4406-ba22-671a9c94e307&quot;,&quot;e892bc52-1970-41d5-b4d0-aac65223f89f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5e33088-1119-4bf8-959e-25b4161b1794&quot;,&quot;title&quot;:&quot;Course Controller Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Course Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests \&quot;before each\&quot; hook in \&quot;Course Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  params: {},\n  query: {},\n  body: {}\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2b5bddc-250e-4ec2-81a7-6fca2e7f445a&quot;,&quot;parentUUID&quot;:&quot;e5e33088-1119-4bf8-959e-25b4161b1794&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Course Controller Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests \&quot;after each\&quot; hook in \&quot;Course Controller Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7b23fc1-22a8-4342-9bff-f7f122a3bc04&quot;,&quot;parentUUID&quot;:&quot;e5e33088-1119-4bf8-959e-25b4161b1794&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0a6bd907-3598-4b99-b04d-b95de97db5da&quot;,&quot;title&quot;:&quot;getAllCourses&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return courses with status 200&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getAllCourses should return courses with status 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourses = [{ course_id: 1, title: \&quot;Test Course\&quot; }];\nstub(CourseModel, \&quot;getAll\&quot;).resolves(dummyCourses);\nreq.query = { keyword: \&quot;Test\&quot; };\nawait courseController.getAllCourses(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ data: dummyCourses })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b46f17b-a313-4778-a05b-d1fff46126e2&quot;,&quot;parentUUID&quot;:&quot;0a6bd907-3598-4b99-b04d-b95de97db5da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getAllCourses should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getAllCourses(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38be6984-6e0c-4472-8558-6d1a65262061&quot;,&quot;parentUUID&quot;:&quot;0a6bd907-3598-4b99-b04d-b95de97db5da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b46f17b-a313-4778-a05b-d1fff46126e2&quot;,&quot;38be6984-6e0c-4472-8558-6d1a65262061&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa71b2b6-4519-48d7-b228-5c177d532282&quot;,&quot;title&quot;:&quot;getCourseById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return course data if found&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseById should return course data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourse = { course_id: 1, title: \&quot;Test Course\&quot; };\nreq.params.id = \&quot;1\&quot;;\nstub(CourseModel, \&quot;getById\&quot;).resolves(dummyCourse);\nawait courseController.getCourseById(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ courseData: dummyCourse })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4754f605-b443-4bba-85e0-e96023149f3d&quot;,&quot;parentUUID&quot;:&quot;aa71b2b6-4519-48d7-b228-5c177d532282&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if course not found&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseById should return 404 if course not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(CourseModel, \&quot;getById\&quot;).resolves(null);\nawait courseController.getCourseById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Course not found\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e164f0ca-a8d1-4986-bcb8-a90e8d681273&quot;,&quot;parentUUID&quot;:&quot;aa71b2b6-4519-48d7-b228-5c177d532282&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseById should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nstub(CourseModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getCourseById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2822257e-2fa0-48b2-8c6d-24f5b4c81b22&quot;,&quot;parentUUID&quot;:&quot;aa71b2b6-4519-48d7-b228-5c177d532282&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4754f605-b443-4bba-85e0-e96023149f3d&quot;,&quot;e164f0ca-a8d1-4986-bcb8-a90e8d681273&quot;,&quot;2822257e-2fa0-48b2-8c6d-24f5b4c81b22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b07e9a2c-ab1d-4a35-9e62-8f813dc732de&quot;,&quot;title&quot;:&quot;createCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a course and return 201&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests createCourse should create a course and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newCourse = { course_id: 101 };\nstub(CourseModel, \&quot;create\&quot;).resolves(newCourse);\nreq.body = { title: \&quot;New Course\&quot; };\nawait courseController.createCourse(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Course created successfully\&quot;,\n  data: { courseId: newCourse.course_id }\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2000e597-e24b-4800-ada2-ac91e8a5d27e&quot;,&quot;parentUUID&quot;:&quot;b07e9a2c-ab1d-4a35-9e62-8f813dc732de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests createCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.body = { title: \&quot;New Course\&quot; };\nawait courseController.createCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbfe00ae-482d-4c97-aea4-75bf9932c00f&quot;,&quot;parentUUID&quot;:&quot;b07e9a2c-ab1d-4a35-9e62-8f813dc732de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2000e597-e24b-4800-ada2-ac91e8a5d27e&quot;,&quot;cbfe00ae-482d-4c97-aea4-75bf9932c00f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc4b9e07-b1e4-4691-a090-88a717bbaca4&quot;,&quot;title&quot;:&quot;updateCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update course and return 200&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests updateCourse should update course and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.body = { title: \&quot;Updated Title\&quot; };\nstub(CourseModel, \&quot;update\&quot;).resolves();\nawait courseController.updateCourse(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Course updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b097ba81-f042-4bec-903d-add65e850305&quot;,&quot;parentUUID&quot;:&quot;bc4b9e07-b1e4-4691-a090-88a717bbaca4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests updateCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.body = { title: \&quot;Updated Title\&quot; };\nstub(CourseModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.updateCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff29bd73-d3ce-4bac-95b4-9c89e890e278&quot;,&quot;parentUUID&quot;:&quot;bc4b9e07-b1e4-4691-a090-88a717bbaca4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b097ba81-f042-4bec-903d-add65e850305&quot;,&quot;ff29bd73-d3ce-4bac-95b4-9c89e890e278&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff3ff3ab-fe4c-4ef1-b6a8-be771ee5b8b0&quot;,&quot;title&quot;:&quot;deleteCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests deleteCourse should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.query = {};\nawait courseController.deleteCourse(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;creator_id is required\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;115e8779-5c23-4065-8a0f-3a6e4578afef&quot;,&quot;parentUUID&quot;:&quot;ff3ff3ab-fe4c-4ef1-b6a8-be771ee5b8b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete course and return 200 if successful&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests deleteCourse should delete course and return 200 if successful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.query = { creator_id: \&quot;10\&quot; };\nstub(CourseModel, \&quot;delete\&quot;).resolves(true);\nawait courseController.deleteCourse(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Course deleted successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b6e8c0b-992a-44fb-a335-efa82f534611&quot;,&quot;parentUUID&quot;:&quot;ff3ff3ab-fe4c-4ef1-b6a8-be771ee5b8b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if course not found or unauthorized&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests deleteCourse should return 404 if course not found or unauthorized&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.query = { creator_id: \&quot;10\&quot; };\nstub(CourseModel, \&quot;delete\&quot;).resolves(false);\nawait courseController.deleteCourse(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({\n  error: \&quot;Course not found or you are not authorized to delete it\&quot;\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96323e5d-0bd8-4c18-a227-ec41c7ef091a&quot;,&quot;parentUUID&quot;:&quot;ff3ff3ab-fe4c-4ef1-b6a8-be771ee5b8b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests deleteCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;1\&quot;;\nreq.query = { creator_id: \&quot;10\&quot; };\nstub(CourseModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.deleteCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8d73f60-dcbe-412c-a785-b10db1554c54&quot;,&quot;parentUUID&quot;:&quot;ff3ff3ab-fe4c-4ef1-b6a8-be771ee5b8b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;115e8779-5c23-4065-8a0f-3a6e4578afef&quot;,&quot;2b6e8c0b-992a-44fb-a335-efa82f534611&quot;,&quot;96323e5d-0bd8-4c18-a227-ec41c7ef091a&quot;,&quot;c8d73f60-dcbe-412c-a785-b10db1554c54&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8c597a1-c313-464c-9961-5f79c9af7ac4&quot;,&quot;title&quot;:&quot;getProviderCourses&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return provider courses when creator_id is provided&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getProviderCourses should return provider courses when creator_id is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyCourses = [{ course_id: 1, title: \&quot;Provider Course\&quot; }];\nreq.query = { id: 10 };\nstub(CourseModel, \&quot;getProviderCourses\&quot;).resolves(dummyCourses);\nawait courseController.getProviderCourses(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ data: dummyCourses })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c20ff3f-12c8-499b-aad8-02f78a9c7726&quot;,&quot;parentUUID&quot;:&quot;d8c597a1-c313-464c-9961-5f79c9af7ac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getProviderCourses should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = {};\nawait courseController.getProviderCourses(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;creator_id is required\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;095bfb6e-170c-4d16-aeea-397475e9cfee&quot;,&quot;parentUUID&quot;:&quot;d8c597a1-c313-464c-9961-5f79c9af7ac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getProviderCourses should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { id: 10 };\nstub(CourseModel, \&quot;getProviderCourses\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getProviderCourses(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de966e4c-cc7a-439a-942a-00dcce83cbe7&quot;,&quot;parentUUID&quot;:&quot;d8c597a1-c313-464c-9961-5f79c9af7ac4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c20ff3f-12c8-499b-aad8-02f78a9c7726&quot;,&quot;095bfb6e-170c-4d16-aeea-397475e9cfee&quot;,&quot;de966e4c-cc7a-439a-942a-00dcce83cbe7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5bb2b56f-ffc3-483d-901f-b31800bdd1d4&quot;,&quot;title&quot;:&quot;getEnrolledStudentsForCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrolled students when courseId is provided&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForCourse should return enrolled students when courseId is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyStudents = [{ student_id: 1, name: \&quot;Student A\&quot; }];\nreq.params = { courseId: \&quot;1\&quot; };\nreq.query = { courseId: \&quot;1\&quot; };\nstub(CourseModel, \&quot;getEnrolledStudentsForCourse\&quot;).resolves(dummyStudents);\nawait courseController.getEnrolledStudentsForCourse(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ data: dummyStudents })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6e93917-0bd7-4904-9c6a-75ba0f57a5a9&quot;,&quot;parentUUID&quot;:&quot;5bb2b56f-ffc3-483d-901f-b31800bdd1d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if courseId is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForCourse should return 400 if courseId is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = {};\nawait courseController.getEnrolledStudentsForCourse(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;course_id is required\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;813b7da8-6cba-4d18-b590-0949112636d8&quot;,&quot;parentUUID&quot;:&quot;5bb2b56f-ffc3-483d-901f-b31800bdd1d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;1\&quot; };\nreq.query = { courseId: \&quot;1\&quot; };\nstub(CourseModel, \&quot;getEnrolledStudentsForCourse\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getEnrolledStudentsForCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5695ac64-69a2-4429-ab17-80012e8794bf&quot;,&quot;parentUUID&quot;:&quot;5bb2b56f-ffc3-483d-901f-b31800bdd1d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6e93917-0bd7-4904-9c6a-75ba0f57a5a9&quot;,&quot;813b7da8-6cba-4d18-b590-0949112636d8&quot;,&quot;5695ac64-69a2-4429-ab17-80012e8794bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79051dfa-195d-472f-8578-250ebb456c7d&quot;,&quot;title&quot;:&quot;getEnrolledStudentsForProvider&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrolled students for provider when creator_id is provided&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForProvider should return enrolled students for provider when creator_id is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyStudents = [{ student_id: 1, name: \&quot;Student A\&quot; }];\nreq.query = { creator_id: \&quot;10\&quot; };\nstub(CourseModel, \&quot;getEnrolledStudentsForProvider\&quot;).resolves(dummyStudents);\nawait courseController.getEnrolledStudentsForProvider(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ data: dummyStudents })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f14b127-e1dc-4f02-a58d-4ee81bc0ffb9&quot;,&quot;parentUUID&quot;:&quot;79051dfa-195d-472f-8578-250ebb456c7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if creator_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForProvider should return 400 if creator_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = {};\nawait courseController.getEnrolledStudentsForProvider(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;creator_id is required\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bf43ac1-fb5f-450d-b1bb-3af934e279fe&quot;,&quot;parentUUID&quot;:&quot;79051dfa-195d-472f-8578-250ebb456c7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getEnrolledStudentsForProvider should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { creator_id: \&quot;10\&quot; };\nstub(CourseModel, \&quot;getEnrolledStudentsForProvider\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getEnrolledStudentsForProvider(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c7372f6-eede-43ec-a19e-af7173b05ae2&quot;,&quot;parentUUID&quot;:&quot;79051dfa-195d-472f-8578-250ebb456c7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f14b127-e1dc-4f02-a58d-4ee81bc0ffb9&quot;,&quot;0bf43ac1-fb5f-450d-b1bb-3af934e279fe&quot;,&quot;7c7372f6-eede-43ec-a19e-af7173b05ae2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c947ad3-e804-43f1-b16e-a576586921a4&quot;,&quot;title&quot;:&quot;addCourseModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a course module and return 201&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests addCourseModule should add a course module and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModule = { module_id: 555 };\nstub(CourseModel, \&quot;addModule\&quot;).resolves(dummyModule);\nreq.body = { course_id: 1, title: \&quot;New Module\&quot; };\nawait courseController.addCourseModule(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Course module added successfully!\&quot;,\n  module_id: dummyModule.module_id\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06441c81-53c9-4ae9-bd5d-b219256e7536&quot;,&quot;parentUUID&quot;:&quot;5c947ad3-e804-43f1-b16e-a576586921a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests addCourseModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModel, \&quot;addModule\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.body = { course_id: 1, title: \&quot;New Module\&quot; };\nawait courseController.addCourseModule(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d166fe8e-7569-44f1-86d7-9a88c3d03938&quot;,&quot;parentUUID&quot;:&quot;5c947ad3-e804-43f1-b16e-a576586921a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06441c81-53c9-4ae9-bd5d-b219256e7536&quot;,&quot;d166fe8e-7569-44f1-86d7-9a88c3d03938&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e999461e-d09e-46d9-9499-39a786fb90a5&quot;,&quot;title&quot;:&quot;getCourseModules&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return modules when course_id is provided&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseModules should return modules when course_id is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModules = [{ module_id: 1, title: \&quot;Module 1\&quot; }];\nreq.query = { course_id: \&quot;1\&quot; };\nstub(CourseModel, \&quot;getModules\&quot;).resolves(dummyModules);\nawait courseController.getCourseModules(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ data: dummyModules })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8103c84-d304-420a-ab38-f0aae14df8a8&quot;,&quot;parentUUID&quot;:&quot;e999461e-d09e-46d9-9499-39a786fb90a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if course_id is missing&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseModules should return 400 if course_id is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = {};\nawait courseController.getCourseModules(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;course_id is required\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1f2e2f4-4975-49e5-b9ce-029d49a6f860&quot;,&quot;parentUUID&quot;:&quot;e999461e-d09e-46d9-9499-39a786fb90a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests getCourseModules should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.query = { course_id: \&quot;1\&quot; };\nstub(CourseModel, \&quot;getModules\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.getCourseModules(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93f3eec3-894d-431b-a969-50c1c76c952b&quot;,&quot;parentUUID&quot;:&quot;e999461e-d09e-46d9-9499-39a786fb90a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8103c84-d304-420a-ab38-f0aae14df8a8&quot;,&quot;d1f2e2f4-4975-49e5-b9ce-029d49a6f860&quot;,&quot;93f3eec3-894d-431b-a969-50c1c76c952b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;273d9898-33a0-400d-9927-761ec6491234&quot;,&quot;title&quot;:&quot;updateCourseModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a module and return 200 if successful&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests updateCourseModule should update a module and return 200 if successful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { module_id: \&quot;123\&quot; };\nreq.body = { title: \&quot;Updated Module\&quot; };\nstub(CourseModel, \&quot;updateModule\&quot;).resolves(true);\nawait courseController.updateCourseModule(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Module updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbf599a3-5797-4a54-97f2-148fb963681b&quot;,&quot;parentUUID&quot;:&quot;273d9898-33a0-400d-9927-761ec6491234&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if module not found or not updated&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests updateCourseModule should return 404 if module not found or not updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { module_id: \&quot;123\&quot; };\nreq.body = { title: \&quot;Updated Module\&quot; };\nstub(CourseModel, \&quot;updateModule\&quot;).resolves(false);\nawait courseController.updateCourseModule(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Module not found or not updated\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9480fbb3-f9e9-494a-a5ec-53074d573727&quot;,&quot;parentUUID&quot;:&quot;273d9898-33a0-400d-9927-761ec6491234&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;Course Controller Whitebox Tests updateCourseModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { module_id: \&quot;123\&quot; };\nreq.body = { title: \&quot;Updated Module\&quot; };\nstub(CourseModel, \&quot;updateModule\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseController.updateCourseModule(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2020fe9-5c25-48e9-a7ae-9c160f8b8cd9&quot;,&quot;parentUUID&quot;:&quot;273d9898-33a0-400d-9927-761ec6491234&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbf599a3-5797-4a54-97f2-148fb963681b&quot;,&quot;9480fbb3-f9e9-494a-a5ec-53074d573727&quot;,&quot;c2020fe9-5c25-48e9-a7ae-9c160f8b8cd9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f30a3196-bc37-462f-801e-ef6965f786e3&quot;,&quot;title&quot;:&quot;CourseEnrollmentController Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;CourseEnrollmentController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests \&quot;before each\&quot; hook in \&quot;CourseEnrollmentController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  params: {},\n  query: {},\n  body: {}\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f16cb83-0854-4e31-ab87-f497bb63c5c1&quot;,&quot;parentUUID&quot;:&quot;f30a3196-bc37-462f-801e-ef6965f786e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseEnrollmentController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests \&quot;after each\&quot; hook in \&quot;CourseEnrollmentController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd3059e5-fb28-4a89-a048-fc19f01d6353&quot;,&quot;parentUUID&quot;:&quot;f30a3196-bc37-462f-801e-ef6965f786e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1f2e4652-6f3c-489f-82b5-711d05ddda38&quot;,&quot;title&quot;:&quot;getAllEnrollments&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all enrollments with status 200&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests getAllEnrollments should return all enrollments with status 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollments = [{ enrollment_id: 1, userId: 10 }];\nstub(EnrollmentModel, \&quot;getAll\&quot;).resolves(dummyEnrollments);\nawait courseEnrollmentController.getAllEnrollments(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyEnrollments)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a32ef254-f2b1-4cd3-b763-7026b29cb321&quot;,&quot;parentUUID&quot;:&quot;1f2e4652-6f3c-489f-82b5-711d05ddda38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests getAllEnrollments should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;getAll\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseEnrollmentController.getAllEnrollments(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7be07306-bb8c-4fd2-ad55-b3a49e3841f8&quot;,&quot;parentUUID&quot;:&quot;1f2e4652-6f3c-489f-82b5-711d05ddda38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a32ef254-f2b1-4cd3-b763-7026b29cb321&quot;,&quot;7be07306-bb8c-4fd2-ad55-b3a49e3841f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8a14f89-59fa-4712-bfc3-e1933164e723&quot;,&quot;title&quot;:&quot;getEnrollmentById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrollment data if found&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests getEnrollmentById should return enrollment data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollment = { enrollment_id: 1, userId: 10 };\nreq.params.enrollmentId = \&quot;1\&quot;;\nstub(EnrollmentModel, \&quot;getById\&quot;).resolves(dummyEnrollment);\nawait courseEnrollmentController.getEnrollmentById(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyEnrollment)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0daf38b-9dca-4134-9cd9-435b67367ce4&quot;,&quot;parentUUID&quot;:&quot;a8a14f89-59fa-4712-bfc3-e1933164e723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if enrollment not found&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests getEnrollmentById should return 404 if enrollment not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nstub(EnrollmentModel, \&quot;getById\&quot;).resolves(null);\nawait courseEnrollmentController.getEnrollmentById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Enrollment not found\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;855d2663-3a8c-4631-a037-dc6b55876068&quot;,&quot;parentUUID&quot;:&quot;a8a14f89-59fa-4712-bfc3-e1933164e723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests getEnrollmentById should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nstub(EnrollmentModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseEnrollmentController.getEnrollmentById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bed79e4b-d31a-4020-b81f-634198e92c93&quot;,&quot;parentUUID&quot;:&quot;a8a14f89-59fa-4712-bfc3-e1933164e723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0daf38b-9dca-4134-9cd9-435b67367ce4&quot;,&quot;855d2663-3a8c-4631-a037-dc6b55876068&quot;,&quot;bed79e4b-d31a-4020-b81f-634198e92c93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;185292ff-ee56-4908-aeb4-494273620ffc&quot;,&quot;title&quot;:&quot;checkUserEnrollment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return enrollment status&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests checkUserEnrollment should return enrollment status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.courseId = \&quot;123\&quot;;\nreq.query.userId = \&quot;10\&quot;;\nstub(EnrollmentModel, \&quot;checkUserEnrollment\&quot;).resolves(true);\nawait courseEnrollmentController.checkUserEnrollment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ isEnrolled: true })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26b8a553-91da-457e-bd45-e245ced616ec&quot;,&quot;parentUUID&quot;:&quot;185292ff-ee56-4908-aeb4-494273620ffc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests checkUserEnrollment should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.courseId = \&quot;123\&quot;;\nreq.query.userId = \&quot;10\&quot;;\nstub(EnrollmentModel, \&quot;checkUserEnrollment\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseEnrollmentController.checkUserEnrollment(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5b74f28-ea51-4811-a90c-03646e20e256&quot;,&quot;parentUUID&quot;:&quot;185292ff-ee56-4908-aeb4-494273620ffc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26b8a553-91da-457e-bd45-e245ced616ec&quot;,&quot;a5b74f28-ea51-4811-a90c-03646e20e256&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73948e41-d908-425d-b074-155857d69052&quot;,&quot;title&quot;:&quot;createEnrollment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create an enrollment and return 201&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests createEnrollment should create an enrollment and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyEnrollment = { enrollment_id: 50 };\nstub(EnrollmentModel, \&quot;create\&quot;).resolves(dummyEnrollment);\nreq.body = { userId: 10, courseId: \&quot;123\&quot;, status: \&quot;active\&quot; };\nawait courseEnrollmentController.createEnrollment(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Enrollment created successfully\&quot;,\n  enrollment_id: dummyEnrollment.enrollment_id\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d1d7bb7-771f-4ec7-9d17-a15e7c8d6ff1&quot;,&quot;parentUUID&quot;:&quot;73948e41-d908-425d-b074-155857d69052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests createEnrollment should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(EnrollmentModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.body = { userId: 10, courseId: \&quot;123\&quot;, status: \&quot;active\&quot; };\nawait courseEnrollmentController.createEnrollment(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c877d037-d2d3-4279-9963-a90a1b3cb512&quot;,&quot;parentUUID&quot;:&quot;73948e41-d908-425d-b074-155857d69052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d1d7bb7-771f-4ec7-9d17-a15e7c8d6ff1&quot;,&quot;c877d037-d2d3-4279-9963-a90a1b3cb512&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f875de61-bd11-4130-8b06-04795d98ae33&quot;,&quot;title&quot;:&quot;updateEnrollment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update an enrollment and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests updateEnrollment should update an enrollment and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nreq.body = { status: \&quot;completed\&quot; };\nstub(EnrollmentModel, \&quot;update\&quot;).resolves();\nawait courseEnrollmentController.updateEnrollment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Enrollment updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1239e4e5-7104-464a-a774-8fe3c45f9cc4&quot;,&quot;parentUUID&quot;:&quot;f875de61-bd11-4130-8b06-04795d98ae33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests updateEnrollment should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nreq.body = { status: \&quot;completed\&quot; };\nstub(EnrollmentModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseEnrollmentController.updateEnrollment(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a86740-cbfa-43af-bdf0-699da5f0d7f2&quot;,&quot;parentUUID&quot;:&quot;f875de61-bd11-4130-8b06-04795d98ae33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1239e4e5-7104-464a-a774-8fe3c45f9cc4&quot;,&quot;a3a86740-cbfa-43af-bdf0-699da5f0d7f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8a53679-092a-44ed-b578-9ccc5dca104e&quot;,&quot;title&quot;:&quot;deleteEnrollment&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseEnrollmentController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete an enrollment and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests deleteEnrollment should delete an enrollment and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nstub(EnrollmentModel, \&quot;delete\&quot;).resolves();\nawait courseEnrollmentController.deleteEnrollment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Enrollment deleted successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;428e714b-54c8-4da6-a12c-5746211c8f1f&quot;,&quot;parentUUID&quot;:&quot;b8a53679-092a-44ed-b578-9ccc5dca104e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseEnrollmentController Whitebox Tests deleteEnrollment should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.enrollmentId = \&quot;1\&quot;;\nstub(EnrollmentModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseEnrollmentController.deleteEnrollment(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f347276b-3676-41ae-afea-e080b77f2b5b&quot;,&quot;parentUUID&quot;:&quot;b8a53679-092a-44ed-b578-9ccc5dca104e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;428e714b-54c8-4da6-a12c-5746211c8f1f&quot;,&quot;f347276b-3676-41ae-afea-e080b77f2b5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ed928f9-6735-476d-90c4-618a84c39747&quot;,&quot;title&quot;:&quot;CourseModuleController Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;CourseModuleController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests \&quot;before each\&quot; hook in \&quot;CourseModuleController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  params: {},\n  body: {}\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe66ebca-2990-499a-ae5f-601ab70d11cc&quot;,&quot;parentUUID&quot;:&quot;2ed928f9-6735-476d-90c4-618a84c39747&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseModuleController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests \&quot;after each\&quot; hook in \&quot;CourseModuleController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7accc63b-da21-4dd4-b827-5cabc185c386&quot;,&quot;parentUUID&quot;:&quot;2ed928f9-6735-476d-90c4-618a84c39747&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c7d4781f-6c33-41e6-943e-203a9849da29&quot;,&quot;title&quot;:&quot;getAllModulesForCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all modules for a course with status 200&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests getAllModulesForCourse should return all modules for a course with status 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModules = [{ module_id: 1, moduleName: \&quot;Module 1\&quot; }];\nstub(CourseModuleModel, \&quot;getAllForCourse\&quot;).resolves(dummyModules);\nreq.params.courseId = \&quot;100\&quot;;\nawait courseModuleController.getAllModulesForCourse(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyModules)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b10bb06-8e45-4fb1-8f00-f12fc36e143c&quot;,&quot;parentUUID&quot;:&quot;c7d4781f-6c33-41e6-943e-203a9849da29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests getAllModulesForCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;getAllForCourse\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.params.courseId = \&quot;100\&quot;;\nawait courseModuleController.getAllModulesForCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8333c76a-5f65-487f-ab3f-b7cb071e403a&quot;,&quot;parentUUID&quot;:&quot;c7d4781f-6c33-41e6-943e-203a9849da29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b10bb06-8e45-4fb1-8f00-f12fc36e143c&quot;,&quot;8333c76a-5f65-487f-ab3f-b7cb071e403a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;445cc4e0-1d2a-42c8-b96c-0313dfaf78f9&quot;,&quot;title&quot;:&quot;getModuleById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return module data if found&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests getModuleById should return module data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModule = { module_id: 55, moduleName: \&quot;Module 55\&quot; };\nreq.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;55\&quot; };\nstub(CourseModuleModel, \&quot;getById\&quot;).resolves(dummyModule);\nawait courseModuleController.getModuleById(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyModule)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13639a4f-f41b-482a-85ae-f384db4b6f08&quot;,&quot;parentUUID&quot;:&quot;445cc4e0-1d2a-42c8-b96c-0313dfaf78f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if module is not found&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests getModuleById should return 404 if module is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;999\&quot; };\nstub(CourseModuleModel, \&quot;getById\&quot;).resolves(null);\nawait courseModuleController.getModuleById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Module not found\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50134e4a-5740-4300-8288-2555b1c785c3&quot;,&quot;parentUUID&quot;:&quot;445cc4e0-1d2a-42c8-b96c-0313dfaf78f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests getModuleById should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;55\&quot; };\nstub(CourseModuleModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseModuleController.getModuleById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;436cabfc-c87a-43f6-895d-a3b3ec7a0039&quot;,&quot;parentUUID&quot;:&quot;445cc4e0-1d2a-42c8-b96c-0313dfaf78f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13639a4f-f41b-482a-85ae-f384db4b6f08&quot;,&quot;50134e4a-5740-4300-8288-2555b1c785c3&quot;,&quot;436cabfc-c87a-43f6-895d-a3b3ec7a0039&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37db894f-33af-4321-93cc-951ed99a89d3&quot;,&quot;title&quot;:&quot;createModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a module and return 201&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests createModule should create a module and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyModule = { module_id: 77 };\nstub(CourseModuleModel, \&quot;create\&quot;).resolves(dummyModule);\nreq.params.courseId = \&quot;100\&quot;;\nreq.body = { moduleName: \&quot;New Module\&quot;, moduleContent: \&quot;Content here\&quot; };\nawait courseModuleController.createModule(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Module created successfully\&quot;,\n  moduleId: dummyModule.module_id\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e90228db-b91c-40e5-9809-185063d29ce9&quot;,&quot;parentUUID&quot;:&quot;37db894f-33af-4321-93cc-951ed99a89d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests createModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseModuleModel, \&quot;create\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.params.courseId = \&quot;100\&quot;;\nreq.body = { moduleName: \&quot;New Module\&quot;, moduleContent: \&quot;Content here\&quot; };\nawait courseModuleController.createModule(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2c48a28-84bf-4fee-89ab-a9fc23936153&quot;,&quot;parentUUID&quot;:&quot;37db894f-33af-4321-93cc-951ed99a89d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e90228db-b91c-40e5-9809-185063d29ce9&quot;,&quot;f2c48a28-84bf-4fee-89ab-a9fc23936153&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63b0c6eb-8f4c-49c9-9ad4-7674ac4d0e15&quot;,&quot;title&quot;:&quot;updateModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a module and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests updateModule should update a module and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;77\&quot; };\nreq.body = { moduleName: \&quot;Updated Module\&quot;, moduleContent: \&quot;Updated content\&quot; };\nstub(CourseModuleModel, \&quot;update\&quot;).resolves();\nawait courseModuleController.updateModule(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Module updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30686619-014c-4e3a-b81f-038b92cba887&quot;,&quot;parentUUID&quot;:&quot;63b0c6eb-8f4c-49c9-9ad4-7674ac4d0e15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests updateModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;77\&quot; };\nreq.body = { moduleName: \&quot;Updated Module\&quot;, moduleContent: \&quot;Updated content\&quot; };\nstub(CourseModuleModel, \&quot;update\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseModuleController.updateModule(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19e2be2f-414f-4ce1-bc3c-0754cfc7b673&quot;,&quot;parentUUID&quot;:&quot;63b0c6eb-8f4c-49c9-9ad4-7674ac4d0e15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30686619-014c-4e3a-b81f-038b92cba887&quot;,&quot;19e2be2f-414f-4ce1-bc3c-0754cfc7b673&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f611cd25-4a7f-4087-b465-d50a76afc0a7&quot;,&quot;title&quot;:&quot;deleteModule&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseModuleController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a module and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests deleteModule should delete a module and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;77\&quot; };\nstub(CourseModuleModel, \&quot;delete\&quot;).resolves();\nawait courseModuleController.deleteModule(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Module deleted successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaeb5d53-e9cf-47f5-808f-a290ee9d5cbd&quot;,&quot;parentUUID&quot;:&quot;f611cd25-4a7f-4087-b465-d50a76afc0a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseModuleController Whitebox Tests deleteModule should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { courseId: \&quot;100\&quot;, moduleId: \&quot;77\&quot; };\nstub(CourseModuleModel, \&quot;delete\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseModuleController.deleteModule(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f596595-9a8c-4268-a623-95295ca2f3e1&quot;,&quot;parentUUID&quot;:&quot;f611cd25-4a7f-4087-b465-d50a76afc0a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eaeb5d53-e9cf-47f5-808f-a290ee9d5cbd&quot;,&quot;1f596595-9a8c-4268-a623-95295ca2f3e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e3184330-9e2d-42b3-a6b6-9f2438f33db0&quot;,&quot;title&quot;:&quot;CourseReviewController Whitebox Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;CourseReviewController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests \&quot;before each\&quot; hook in \&quot;CourseReviewController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n  params: {},\n  query: {},\n  body: {}\n};\nres = {\n  status: stub().returnsThis(),\n  json: stub()\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1c82388-d7cf-41c1-b885-18e1a3726741&quot;,&quot;parentUUID&quot;:&quot;e3184330-9e2d-42b3-a6b6-9f2438f33db0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;CourseReviewController Whitebox Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests \&quot;after each\&quot; hook in \&quot;CourseReviewController Whitebox Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a66e35eb-8337-49cd-b18c-df8f79358fc4&quot;,&quot;parentUUID&quot;:&quot;e3184330-9e2d-42b3-a6b6-9f2438f33db0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd3bc9a0-cd29-45da-ae9b-76739684044b&quot;,&quot;title&quot;:&quot;getAllReviewsForCourse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return reviews for a course with status 200&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests getAllReviewsForCourse should return reviews for a course with status 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyReviews = [{ review_id: 1, rating: 5 }];\nstub(CourseReviewModel, \&quot;getReviews\&quot;).resolves(dummyReviews);\nreq.params.courseId = \&quot;100\&quot;;\nreq.query.externalReferenceNumber = \&quot;ext-123\&quot;;\nawait courseReviewController.getAllReviewsForCourse(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyReviews)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2b59386-c419-4a1c-aef1-3c7494d19e6f&quot;,&quot;parentUUID&quot;:&quot;bd3bc9a0-cd29-45da-ae9b-76739684044b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests getAllReviewsForCourse should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;getReviews\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.params.courseId = \&quot;100\&quot;;\nreq.query.externalReferenceNumber = \&quot;ext-123\&quot;;\nawait courseReviewController.getAllReviewsForCourse(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cae4d5a6-513e-4520-bddd-c48619159da4&quot;,&quot;parentUUID&quot;:&quot;bd3bc9a0-cd29-45da-ae9b-76739684044b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2b59386-c419-4a1c-aef1-3c7494d19e6f&quot;,&quot;cae4d5a6-513e-4520-bddd-c48619159da4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b969eede-6bcb-49bb-a932-d82a54841a5a&quot;,&quot;title&quot;:&quot;getReviewById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return review data if found&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests getReviewById should return review data if found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyReview = { review_id: 1, rating: 5, comment: \&quot;Excellent\&quot; };\nreq.params.reviewId = \&quot;1\&quot;;\nstub(CourseReviewModel, \&quot;getById\&quot;).resolves(dummyReview);\nawait courseReviewController.getReviewById(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(dummyReview)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bab938a2-cc22-48be-b0fd-3485b6987d47&quot;,&quot;parentUUID&quot;:&quot;b969eede-6bcb-49bb-a932-d82a54841a5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if review not found&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests getReviewById should return 404 if review not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nstub(CourseReviewModel, \&quot;getById\&quot;).resolves(null);\nawait courseReviewController.getReviewById(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Review not found\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ecbbd04-eaa6-45e6-a287-e8c7924cd82e&quot;,&quot;parentUUID&quot;:&quot;b969eede-6bcb-49bb-a932-d82a54841a5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests getReviewById should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nstub(CourseReviewModel, \&quot;getById\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseReviewController.getReviewById(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f40fee33-afb4-48cd-81ae-809336f5d4f2&quot;,&quot;parentUUID&quot;:&quot;b969eede-6bcb-49bb-a932-d82a54841a5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bab938a2-cc22-48be-b0fd-3485b6987d47&quot;,&quot;7ecbbd04-eaa6-45e6-a287-e8c7924cd82e&quot;,&quot;f40fee33-afb4-48cd-81ae-809336f5d4f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6676fadb-51c8-4aab-9897-5b40de61ecd7&quot;,&quot;title&quot;:&quot;createReview&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a review and return 201&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests createReview should create a review and return 201&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyResult = { reviewId: 10 };\nstub(CourseReviewModel, \&quot;createReview\&quot;).resolves(dummyResult);\nreq.params.courseId = \&quot;100\&quot;;\nreq.body = {\n  rating: 5,\n  comment: \&quot;Great course\&quot;,\n  userId: 20,\n  externalReferenceNumber: \&quot;ext-456\&quot;\n};\nawait courseReviewController.createReview(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith({\n  message: \&quot;Review created successfully\&quot;,\n  reviewId: dummyResult.reviewId\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59ef3fdf-f26f-4022-bbce-a31d581caea5&quot;,&quot;parentUUID&quot;:&quot;6676fadb-51c8-4aab-9897-5b40de61ecd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests createReview should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stub(CourseReviewModel, \&quot;createReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nreq.params.courseId = \&quot;100\&quot;;\nreq.body = {\n  rating: 5,\n  comment: \&quot;Great course\&quot;,\n  userId: 20,\n  externalReferenceNumber: \&quot;ext-456\&quot;\n};\nawait courseReviewController.createReview(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc1cf5a9-b605-4034-bcfe-f581371cb232&quot;,&quot;parentUUID&quot;:&quot;6676fadb-51c8-4aab-9897-5b40de61ecd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59ef3fdf-f26f-4022-bbce-a31d581caea5&quot;,&quot;cc1cf5a9-b605-4034-bcfe-f581371cb232&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e3437da-f56f-4c40-9b61-4a4a2bfe1570&quot;,&quot;title&quot;:&quot;updateReview&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a review and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests updateReview should update a review and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nreq.body = { rating: 4, comment: \&quot;Good course\&quot; };\nstub(CourseReviewModel, \&quot;updateReview\&quot;).resolves();\nawait courseReviewController.updateReview(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Review updated successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;913fca28-3d86-46fc-bdb6-ffcd4115fa6b&quot;,&quot;parentUUID&quot;:&quot;3e3437da-f56f-4c40-9b61-4a4a2bfe1570&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests updateReview should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nreq.body = { rating: 4, comment: \&quot;Good course\&quot; };\nstub(CourseReviewModel, \&quot;updateReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseReviewController.updateReview(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af148516-1d2d-4ab9-a3db-9b1b2b5854ab&quot;,&quot;parentUUID&quot;:&quot;3e3437da-f56f-4c40-9b61-4a4a2bfe1570&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;913fca28-3d86-46fc-bdb6-ffcd4115fa6b&quot;,&quot;af148516-1d2d-4ab9-a3db-9b1b2b5854ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;310b7511-0c78-42a8-974b-55870dbd8e46&quot;,&quot;title&quot;:&quot;deleteReview&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\unit\\controller\\CourseReviewController.whitebox.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a review and return 200&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests deleteReview should delete a review and return 200&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nstub(CourseReviewModel, \&quot;deleteReview\&quot;).resolves();\nawait courseReviewController.deleteReview(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ message: \&quot;Review deleted successfully\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86f6b035-afa4-4614-81ff-2b4939c9fa30&quot;,&quot;parentUUID&quot;:&quot;310b7511-0c78-42a8-974b-55870dbd8e46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 on error&quot;,&quot;fullTitle&quot;:&quot;CourseReviewController Whitebox Tests deleteReview should return 500 on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.reviewId = \&quot;1\&quot;;\nstub(CourseReviewModel, \&quot;deleteReview\&quot;).rejects(new Error(\&quot;DB error\&quot;));\nawait courseReviewController.deleteReview(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ error: \&quot;Database query failed\&quot; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;555b33ea-874e-4dbe-9900-a56f80102603&quot;,&quot;parentUUID&quot;:&quot;310b7511-0c78-42a8-974b-55870dbd8e46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86f6b035-afa4-4614-81ff-2b4939c9fa30&quot;,&quot;555b33ea-874e-4dbe-9900-a56f80102603&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.1.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;results&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;.tmp&quot;,&quot;reportFilename&quot;:&quot;results&quot;,&quot;quiet&quot;:&quot;true&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;results&quot;,&quot;reportDir&quot;:&quot;.tmp&quot;,&quot;reportTitle&quot;:&quot;ecom_backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;.tmp\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\.tmp\\results.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\deez nuts\\OneDrive\\Desktop\\VSCode MegaFolder\\Projects\\Nodejs\\SC2006 Project\\ecom_backend\\.tmp\\results.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>